<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Pi (œÄ) | Graphics Labs</title>
    <meta name="description" content="Buscador de secuencias en Pi y visualizaci√≥n art√≠stica.">
    <style>
        /* --- ESTILOS BASE --- */
        :root {
            --primary: #00ff41; /* Verde Matrix */
            --primary-dim: rgba(0, 255, 65, 0.3);
            --secondary: #bd00ff;
            --highlight: #ffee00; /* Color para b√∫squeda encontrada */
            --glass: rgba(20, 20, 20, 0.7);
            --glass-text: rgba(30, 30, 30, 0.8);
            --border: rgba(255, 255, 255, 0.1);
            --text: #ffffff;
            --muted: #aaaaaa;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', monospace, sans-serif; }
        
        body {
            background-color: #050505;
            color: var(--text);
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            user-select: none;
        }

        #bg-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; }

        .container {
            position: relative;
            z-index: 10;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* --- CONTROLES --- */
        .controls {
            background: var(--glass);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin: 20px auto;
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .input-group { display: flex; gap: 15px; align-items: flex-end; flex-wrap: wrap; justify-content: center; width: 100%; }
        
        label { color: var(--muted); font-size: 0.8rem; margin-bottom: 5px; display: block; text-align: left;}

        input[type="text"], input[type="number"] {
            background: rgba(0,0,0,0.5);
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 10px;
            border-radius: 5px;
            width: 200px;
            font-size: 1.1rem;
            text-align: center;
            letter-spacing: 2px;
        }
        
        input:focus { outline: none; box-shadow: 0 0 10px var(--primary-dim); }

        button.action-btn {
            background: var(--primary);
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
            text-transform: uppercase;
            font-size: 1rem;
            height: 45px;
        }
        button.action-btn:hover { box-shadow: 0 0 15px var(--primary); transform: scale(1.05); }
        
        button.secondary-btn {
            background: transparent;
            border: 1px solid var(--secondary);
            color: var(--secondary);
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
            height: 45px;
        }
        button.secondary-btn:hover { background: var(--secondary); color: #fff; box-shadow: 0 0 15px var(--secondary); }

        /* --- VISUALIZADOR --- */
        #canvas-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            margin-bottom: 20px;
            position: relative;
            z-index: 10;
        }

        #pi-canvas {
            background: #000;
            border: 1px solid var(--border);
            border-radius: 50%; /* Circular aesthetics */
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.1);
            cursor: crosshair;
            margin-bottom: 15px;
            max-width: 100%;
        }

        .result-box {
            background: rgba(0, 255, 65, 0.1);
            border: 1px solid var(--primary);
            color: #fff;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin-top: 10px;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            max-width: 600px;
            text-align: center;
        }
        
        .highlight-text { color: var(--highlight); font-weight: bold; font-size: 1.2rem; }

        /* --- INFO & ADS --- */
        .info-section {
            background: var(--glass-text);
            padding: 40px;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin: 40px auto;
            max-width: 900px;
            text-align: left;
            line-height: 1.8;
            color: #ddd;
        }
        .info-section h2 { color: var(--primary); margin-bottom: 20px; font-size: 1.5rem; text-transform: uppercase; letter-spacing: 1px; border-bottom: 1px solid var(--border); padding-bottom: 10px; margin-top: 40px; }
        .info-section h2:first-child { margin-top: 0; }
        .info-section p { margin-bottom: 20px; font-size: 1rem; text-align: justify; }

        .ad-container {
            width: 100%;
            max-width: 728px;
            margin: 30px auto;
            min-height: 90px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px dashed rgba(255,255,255,0.1); 
            border-radius: 8px;
            background: rgba(0,0,0,0.2);
        }
        .ad-placeholder-text { color: var(--border); font-size: 0.8rem; text-transform: uppercase; letter-spacing: 2px; }

        /* Nav & Footer */
        nav { display: flex; flex-wrap: wrap; gap: 20px; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .nav-links { display: flex; gap: 15px; }
        .nav-btn { text-decoration: none; color: var(--muted); font-size: 0.9rem; border: 1px solid var(--border); padding: 5px 10px; border-radius: 4px; transition: 0.3s; background: rgba(0,0,0,0.5); }
        .nav-btn:hover { color: var(--primary); border-color: var(--primary); }
        .logo { font-size: 1.2rem; font-weight: bold; color: var(--primary); text-decoration: none; letter-spacing: 2px; }
        
        .lang-switch button { background: rgba(0,0,0,0.5); border: 1px solid var(--border); color: var(--muted); padding: 5px 10px; cursor: pointer; border-radius: 4px; margin-left: 2px;}
        
        /* CORRECCI√ìN 1: Estilo Active forzado */
        .lang-switch button.active { 
            background-color: var(--primary) !important; 
            color: #000 !important; 
            border-color: var(--primary) !important;
            font-weight: bold;
        }
        
        footer { margin-top: auto; background: rgba(0,0,0,0.9); backdrop-filter: blur(5px); border-top: 1px solid var(--border); padding: 30px 20px; text-align: center; font-size: 0.8rem; color: var(--muted); display: flex; flex-direction: column; gap: 15px; align-items: center; position: relative; z-index: 20; }
        .legal-links { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; margin-bottom: 10px; }
        .legal-links a { color: var(--muted); text-decoration: none; transition: 0.3s; border-bottom: 1px solid transparent; }
        .legal-links a:hover { color: var(--primary); border-bottom-color: var(--primary); }

        .coffee-btn { background: linear-gradient(45deg, #FFDD00, #FBB03B); color: #000; padding: 8px 15px; border-radius: 20px; text-decoration: none; font-weight: bold; font-size: 0.85rem; display: inline-flex; align-items: center; gap: 5px; transition: transform 0.2s; }
        .coffee-btn:hover { transform: scale(1.05); }

    </style>
</head>
<body oncontextmenu="return false;">

    <canvas id="bg-canvas"></canvas>

    <div class="container">
        <nav>
            <div class="nav-links">
                <a href="../../index.html" class="nav-btn" id="nav-main">‚Üê HUB PRINCIPAL</a>
                <a href="../index.html" class="nav-btn" id="nav-math">‚Üê HUB MATH</a>
            </div>
            <div class="logo">GRAPHICS LABS</div>
            <div class="lang-switch">
                <button onclick="setLang('es')" id="btn-es" class="active">ES</button>
                <button onclick="setLang('ca')" id="btn-ca">CA</button>
                <button onclick="setLang('en')" id="btn-en">EN</button>
                <button onclick="setLang('fr')" id="btn-fr">FR</button>
                <button onclick="setLang('de')" id="btn-de">DE</button>
                <button onclick="setLang('pt')" id="btn-pt">PT</button>
                <button onclick="setLang('it')" id="btn-it">IT</button>
                <button onclick="setLang('nl')" id="btn-nl">NL</button>
                <button onclick="setLang('ja')" id="btn-ja">JP</button>
            </div>
        </nav>

        <h1 id="txt-title">PROYECTO PI (œÄ)</h1>
        <p style="color:var(--muted); margin-bottom: 20px;" id="txt-desc">Buscador de patrones y visualizaci√≥n art√≠stica de la constante m√°s famosa.</p>

        <div class="controls">
            <div class="input-group">
                <div style="flex:1;">
                    <label id="lbl-search">Buscar secuencia (ej: tu cumplea√±os):</label>
                    <input type="text" id="inp-search" placeholder="1415..." maxlength="10" onkeypress="handleEnter(event)">
                </div>
                <div>
                    <label id="lbl-points">Puntos a dibujar:</label>
                    <input type="number" id="inp-limit" value="2000" min="100" max="10000" step="100">
                </div>
            </div>
            <div class="input-group">
                <button class="action-btn" onclick="runSearch()" id="btn-search">BUSCAR & VISUALIZAR</button>
                <button class="secondary-btn" onclick="resetArt()" id="btn-reset">‚Ü∫ ART</button>
                <button class="secondary-btn" onclick="saveImage()" id="btn-save">üíæ PNG</button>
            </div>
        </div>

        <div class="result-box" id="result-display">
            </div>

        <div id="canvas-container">
            <canvas id="pi-canvas" width="800" height="800"></canvas>
            <p style="color:var(--muted); font-size: 0.8rem; margin-top:5px;" id="txt-canvas-note">Cada l√≠nea conecta un d√≠gito con el siguiente en el c√≠rculo num√©rico.</p>
        </div>

        <div class="info-section">
            <h2 id="info-h-how">C√≥mo funciona este Experimento</h2>
            <p id="info-p-how">
                Este laboratorio ha cargado en memoria los primeros <strong>10.000 decimales</strong> del n√∫mero Pi. Cuando utilizas el buscador, el sistema rastrea esa inmensa cadena num√©rica intentando encontrar tu secuencia exacta. Si la encuentra, apaga el "ruido" de fondo y <strong>ilumina exclusivamente el camino</strong> que forman tus n√∫meros al conectarse entre s√≠ dentro del c√≠rculo, revelando la geometr√≠a oculta de tu fecha o n√∫mero favorito.
            </p>

            <h2 id="info-h-what">¬øQu√© es Pi?</h2>
            <p id="info-p1">
                Pi (œÄ) es la relaci√≥n entre la longitud de una circunferencia y su di√°metro. Es un n√∫mero <strong>irracional</strong>, lo que significa que tiene infinitos decimales sin ning√∫n patr√≥n repetitivo peri√≥dico conocido.
            </p>
            
            <h2 id="info-h-normal">La Normalidad de Pi</h2>
            <p id="info-p2">
                Se sospecha que Pi es un <strong>n√∫mero normal</strong>. Esto significa que cualquier secuencia finita de n√∫meros (como tu fecha de nacimiento, tu n√∫mero de tel√©fono o el c√≥digo binario de una imagen completa) aparece matem√°ticamente en alg√∫n lugar de sus decimales si buscas lo suficientemente lejos.
            </p>

            <h2 id="info-h-art">La Visualizaci√≥n (Cuerdas)</h2>
            <p id="info-p3">
                En este gr√°fico, hemos colocado los d√≠gitos del 0 al 9 alrededor de un c√≠rculo. Trazamos una l√≠nea desde la posici√≥n del decimal $n$ hasta el decimal $n+1$. El resultado es una compleja "telara√±a" matem√°tica.
            </p>
        </div>

        <div class="ad-container"><span class="ad-placeholder-text">Ad Space</span></div>
    </div>

    <footer>
        <div class="legal-links">
            <a href="../../legal.html" id="link-legal">Aviso Legal</a>
            <a href="../../privacy.html" id="link-privacy">Pol√≠tica de Privacidad</a>
            <a href="../../cookies.html" id="link-cookies">Pol√≠tica de Cookies</a>
            <a href="mailto:pbazan@gmail.com" id="link-contact">Contacto</a>
        </div>
        <span id="footer-rights">¬© 2025 Graphics Labs</span>
        <a href="https://paypal.me/pbazan" target="_blank" class="coffee-btn">
            ‚òï <span id="btn-coffee">Inv√≠tame a un caf√©</span>
        </a>
    </footer>

    <script>
        /* --- 1. SEGURIDAD --- */
        document.addEventListener('keydown', function(e) {
            if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I')) {
                e.preventDefault();
            }
        });

        /* --- 2. LOS PRIMEROS 10.000 DIGITOS DE PI --- */
        const PI_STRING = "141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481117450284102701938521105559644622948954930381964428810975665933446128475648233786783165271201909145648566923460348610454326648213393607260249141273724587006606315588174881520920962829254091715364367892590360011330530548820466521384146951941511609433057270365759591953092186117381932611793105118548074462379962749567351885752724891227938183011949129833673362440656643086021394946395224737190702179860943702770539217176293176752384674818467669405132000568127145263560827785771342757789609173637178721468440901224953430146549585371050792279689258923542019956112129021960864034418159813629774771309960518707211349999998372978049951059731732816096318595024459455346908302642522308253344685035261931188171010003137838752886587533208381420617177669147303598253490428755468731159562863882353787593751957781857780532171226806613001927876611195909216420198938095257201065485863278865936153381827968230301952035301852968995773622599413891249721775283479131515574857242454150695950829533116861727855889075098381754637464939319255060400927701671139009848824012858361603563707660104710181942955596198946767837449448255379774726847104047534646208046684259069491293313677028989152104752162056966024058038150193511253382430035587640247496473263914199272604269922796782354781636009341721641219924586315030286182974555706749838505494588586926995690927210797509302955321165344987202755960236480665499119881834797753566369807426542527862551818417574672890977772793800081647060016145249192173217214772350141441973568548161361157352552133475741849468438523323907394143334547762416862518983569485562099219222184272550254256887671790494601653466804988627232791786085784383827967976681454100953883786360950680064225125205117392984896084128488626945604241965285022210661186306744278622039194945047123713786960956364371917287467764657573962413890865832645995813390478027590099465764078951269468398352595709825822620522489407726719478268482601476990902640136394437455305068203496252451749399651431429809190659250937221696461515709858387410597885959772975498930161753928468138268683868942774155991855925245953959431049972524680845987273644695848653836736222626099124608051243884390451244136549762780797715691435997700129616089441694868555848406353422072225828488648158456028506016842739452267467678895252138522549954666727823986456596116354886230577456498035593634568174324112515076069479451096596094025228879710893145669136867228748940560101503308617928680920874760917824938589009714909675985261365549781893129784821682998948722658804857564014270477555132379641451523746234364542858444795265867821051141354735739523113427166102135969536231442952484937187110145765403590279934403742007310578539062198387447808478489683321445713868751943506430218453191048481005370614680674919278191197939952061419663428754440643745123718192179998391015919561814675142691239748940907186494231961567945208095146550225231603881930142093762137855956638937787083039069792077346722182562599661501421503068038447734549202605414665925201497442850732518666002132434088190710486331734649651453905796268561005508106658796998163574736384052571459102897064140110971206280439039759515677157700420337869936007230558763176359421873125147120532928191826186125867321579198414848829164470609575270695722091756711672291098169091528017350671274858322287183520935396572512108357915136988209144421006751033467110314126711136990865851639831501970165151168517143765761835155650884909989859982387345528331635507647918535893226185489632132933089857064204675259070915481416549859461637180270981994309924488957571282890592323326097299712084433573265489382391193259746366730583604142813883032038249037589852437441702913276561809377344403070746921120191302033038019762110110044929321516084244485963766983895228684783123552658213144957685726243344189303968642624341077322697802807318915441101044682325271620105265227211166039666557309254711055785376346682065310989652691862056476931257058635662018558100729360659876486117910453348850346113657686753249441668039626579787718556084552965412665408530614344431858676975145661406800700237877659134401712749470420562230538994561314071127000407854733269939081454664645880797270826683063432858785698305235808933065757406795457163775254202114955761581400250126228594130216471550979259230990796547376125517656751357517829666454779174501129961489030463994713296210734043751895735961458901938971311179042978285647503203198691514028708085990480109412147221317947647772622414254854540332157185306142288137585043063321751829798662237172159160771669254748738986654949450114654062843366393790039769265672146385306736096571209180763832716641627488880078692560290228472104031721186082041900042296617119637792133757511495950156604963186294726547364252308177036751590673502350728354056704038674351362222477158915049530984448933309634087807693259939780541934144737744184263129860809988868741326047215695162396586457302163159819319516735381297416772947867242292465436680098067692823828068996400482435403701416314965897940924323789690706977942236250822168895738379862300159377647165122893578601588161755782973523344604281512627203734314653197777416031990665541876397929334419521541341899485444734567383162499341913181480927777103863877343177207545654532207770921201905166096280490926360197598828161332316663652861932668633606273567630354477628035045077723554710585954870279081435624014517180624643626794561275318134078330336254232783944975382437205835311477119926063813346776879695970309833913077109870408591337464144282277263465947047458784778720192771528073176790770715721344473060570073349243693113835049316312840425121925651798069411352801314701304781643788518529092854520116583934196562134914341595625865865570552690496520985803385072242648293972858478316305777756068887644624824685792603953527734803048029005876075825104747091643961362676044925627420420832085661190625454337213153595845068772460290161876679524061634252257719542916299193064553779914037340432875262888963995879475729174642635745525407909145135711136941091193932519107602082520261879853188770584297259167781314969900901921169717372784768472686084900337702424291651300500516832336435038951702989392233451722013812806965011784408745196012122859937162313017114448464090389064495444006198690754851602632750529834918740786680881833851022833450850486082503930213321971551843063545500766828294930413776552793975175461395398468339363830474611996653858153842056853386218672527035558669911852017639896221385367856677344424608479054612735255861490334862590636240296604518719890097345405906181583236481655473832650798731";

        /* --- 3. LOGICA VISUALIZACION --- */
        const canvas = document.getElementById('pi-canvas');
        const ctx = canvas.getContext('2d');
        const resultsBox = document.getElementById('result-display');
        
        let foundIndices = [];
        let animationId;
        
        function initCanvas() {
            // Background
            ctx.fillStyle = "#000";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            const cx = canvas.width / 2;
            const cy = canvas.height / 2;
            const radius = canvas.width / 2 - 40;

            // Digits
            ctx.font = "bold 24px monospace";
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            
            for(let i=0; i<10; i++) {
                const angle = (Math.PI * 2 * i) / 10 - Math.PI/2;
                const x = cx + (radius + 25) * Math.cos(angle);
                const y = cy + (radius + 25) * Math.sin(angle);
                
                ctx.fillStyle = `hsl(${i * 36}, 100%, 50%)`;
                ctx.fillText(i.toString(), x, y);
            }
        }

        function getPos(digit, radius, cx, cy) {
            const angle = (Math.PI * 2 * digit) / 10 - Math.PI/2;
            return {
                x: cx + radius * Math.cos(angle),
                y: cy + radius * Math.sin(angle)
            };
        }

        function drawArt(highlightSequence = null) {
            const limit = parseInt(document.getElementById('inp-limit').value);
            const cx = canvas.width / 2;
            const cy = canvas.height / 2;
            const radius = canvas.width / 2 - 40;
            
            initCanvas(); 

            // Background Chords
            ctx.lineWidth = 0.5;
            
            for(let i = 0; i < limit - 1; i++) {
                const d1 = parseInt(PI_STRING[i]);
                const d2 = parseInt(PI_STRING[i+1]);
                
                if(isNaN(d1) || isNaN(d2)) continue; 

                const p1 = getPos(d1, radius, cx, cy);
                const p2 = getPos(d2, radius, cx, cy);

                ctx.beginPath();
                ctx.moveTo(p1.x, p1.y);
                const cpX = (p1.x + p2.x) / 2 * 0.5 + cx * 0.5;
                const cpY = (p1.y + p2.y) / 2 * 0.5 + cy * 0.5;
                ctx.quadraticCurveTo(cpX, cpY, p2.x, p2.y);
                
                if (highlightSequence) {
                    ctx.strokeStyle = `rgba(0, 255, 65, 0.05)`; 
                } else {
                    ctx.strokeStyle = `rgba(0, 255, 65, 0.3)`;
                }
                ctx.stroke();
            }

            // Highlight Sequence Path
            if (highlightSequence && foundIndices.length > 0) {
                const seq = highlightSequence;
                
                ctx.lineWidth = 3;
                ctx.shadowBlur = 10;
                ctx.shadowColor = "#ffee00";

                for(let i=0; i < seq.length - 1; i++) {
                     const d1 = parseInt(seq[i]);
                     const d2 = parseInt(seq[i+1]);
                     
                     const p1 = getPos(d1, radius, cx, cy);
                     const p2 = getPos(d2, radius, cx, cy);
                     
                     ctx.beginPath();
                     ctx.moveTo(p1.x, p1.y);
                     const cpX = (p1.x + p2.x) / 2 * 0.5 + cx * 0.5;
                     const cpY = (p1.y + p2.y) / 2 * 0.5 + cy * 0.5;
                     ctx.quadraticCurveTo(cpX, cpY, p2.x, p2.y);
                     
                     ctx.strokeStyle = "#ffee00"; 
                     ctx.stroke();
                }
                ctx.shadowBlur = 0;
            }
        }

        function runSearch() {
            const searchVal = document.getElementById('inp-search').value.replace(/[^0-9]/g, '');
            if(!searchVal) return;

            const piDigitsOnly = PI_STRING.replace('.', '');
            const idx = piDigitsOnly.indexOf(searchVal);
            
            const t = translations[currentLang] || translations['es'];

            if(idx !== -1) {
                foundIndices = [idx];
                const msg = t.msg_found.replace('{pos}', idx);
                resultsBox.innerHTML = `<span class="highlight-text">${msg}</span>`;
                drawArt(searchVal);
            } else {
                resultsBox.innerHTML = `<span style="color:#ff4444">${t.msg_not_found}</span>`;
                drawArt(null);
            }
        }

        function resetArt() {
            document.getElementById('inp-search').value = "";
            
            // Restore default text
            const t = translations[currentLang] || translations['es'];
            resultsBox.innerText = t.txt_ready;
            
            drawArt(null);
        }

        function handleEnter(e) {
            if(e.key === 'Enter') runSearch();
        }

        function saveImage() {
            const link = document.createElement('a');
            link.download = 'pi_art_graphics_labs.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        /* --- 4. MULTI-IDIOMA (COMPLETO) --- */
        const translations = {
            'es': {
                nav_main: "‚Üê HUB PRINCIPAL", nav_math: "‚Üê HUB MATH",
                title: "PROYECTO PI (œÄ)", desc: "Buscador de patrones y visualizaci√≥n art√≠stica.",
                lbl_search: "Buscar secuencia (ej: tu cumplea√±os):", lbl_points: "Puntos a dibujar:",
                btn_search: "BUSCAR & VISUALIZAR", btn_reset: "‚Ü∫ ART", btn_save: "üíæ PNG",
                txt_ready: "Introduce n√∫meros para buscar en los primeros 10.000 d√≠gitos.",
                msg_found: "¬°Encontrado! Posici√≥n {pos}", msg_not_found: "No encontrado en los primeros 10.000 d√≠gitos.",
                ph_search: "1415...",
                canvas_note: "Cada l√≠nea conecta un d√≠gito con el siguiente.",
                h_how: "C√≥mo funciona este Experimento",
                p_how: "Este laboratorio ha cargado en memoria los primeros 10.000 decimales del n√∫mero Pi. Cuando utilizas el buscador, el sistema rastrea esa inmensa cadena num√©rica intentando encontrar tu secuencia exacta. Si la encuentra, apaga el 'ruido' de fondo e ilumina exclusivamente el camino que forman tus n√∫meros al conectarse entre s√≠.",
                h_what: "¬øQu√© es Pi?", p1: "Pi es la relaci√≥n entre circunferencia y di√°metro. Es irracional e infinito.",
                h_normal: "La Normalidad de Pi", p2: "Se cree que Pi contiene todas las secuencias num√©ricas finitas posibles.",
                h_art: "La Visualizaci√≥n", p3: "Conectamos los d√≠gitos en un c√≠rculo creando una telara√±a matem√°tica.",
                legal: "Aviso Legal", privacy: "Pol√≠tica Privacidad", cookies: "Cookies", contact: "Contacto", coffee: "Inv√≠tame a un caf√©",
                rights: "¬© 2025 Graphics Labs", ad_text: "Ad Space"
            },
            'en': {
                nav_main: "‚Üê MAIN HUB", nav_math: "‚Üê MATH HUB",
                title: "PROJECT PI (œÄ)", desc: "Pattern searcher and artistic visualization.",
                lbl_search: "Search sequence (e.g. birthday):", lbl_points: "Points to draw:",
                btn_search: "SEARCH & VISUALIZE", btn_reset: "‚Ü∫ ART", btn_save: "üíæ PNG",
                txt_ready: "Enter numbers to search in the first 10,000 digits.",
                msg_found: "Found! Position {pos}", msg_not_found: "Not found in the first 10,000 digits.",
                ph_search: "1415...",
                canvas_note: "Each line connects a digit to the next one.",
                h_how: "How it works",
                p_how: "This lab has loaded the first 10,000 decimals of Pi into memory. When you use the search, the system scans this immense numerical chain to find your exact sequence. If found, it dims the background noise and illuminates only the path formed by your numbers connecting to each other.",
                h_what: "What is Pi?", p1: "Pi is the ratio of a circle's circumference to its diameter.",
                h_normal: "Normality of Pi", p2: "It is believed Pi contains every possible finite number sequence.",
                h_art: "The Visualization", p3: "We connect digits on a circle creating a math web.",
                legal: "Legal Notice", privacy: "Privacy Policy", cookies: "Cookies", contact: "Contact", coffee: "Buy me a coffee",
                rights: "¬© 2025 Graphics Labs", ad_text: "Ad Space"
            },
            'ca': {
                nav_main: "‚Üê HUB PRINCIPAL", nav_math: "‚Üê HUB MATH",
                title: "PROJECTE PI (œÄ)", desc: "Cercador de patrons i visualitzaci√≥ art√≠stica.",
                lbl_search: "Cerca seq√º√®ncia (ex: aniversari):", lbl_points: "Punts a dibuixar:",
                btn_search: "CERCAR & VISUALITZAR", btn_reset: "‚Ü∫ ART", btn_save: "üíæ PNG",
                txt_ready: "Introdueix nombres per cercar als primers 10.000 d√≠gits.",
                msg_found: "Trobat! Posici√≥ {pos}", msg_not_found: "No trobat als primers 10.000 d√≠gits.",
                ph_search: "1415...",
                canvas_note: "Cada l√≠nia connecta un d√≠git amb el seg√ºent.",
                h_how: "Com funciona",
                p_how: "Aquest laboratori ha carregat els primers 10.000 decimals de Pi. Quan utilitzes el cercador, el sistema rastreja aquesta cadena per trobar la teva seq√º√®ncia. Si la troba, il¬∑lumina exclusivament el cam√≠ que formen els teus n√∫meros en connectar-se entre si.",
                h_what: "Qu√® √©s Pi?", p1: "Pi √©s la relaci√≥ entre circumfer√®ncia i di√†metre.",
                h_normal: "La Normalitat de Pi", p2: "Es creu que Pi cont√© totes les seq√º√®ncies possibles.",
                h_art: "La Visualitzaci√≥", p3: "Connectem els d√≠gits en un cercle creant una teranyina.",
                legal: "Av√≠s Legal", privacy: "Pol√≠tica Privacitat", cookies: "Cookies", contact: "Contacte", coffee: "Convida'm a un caf√®",
                rights: "¬© 2025 Graphics Labs", ad_text: "Ad Space"
            },
            'fr': {
                nav_main: "‚Üê HUB PRINCIPAL", nav_math: "‚Üê HUB MATH",
                title: "PROJET PI (œÄ)", desc: "Chercheur de motifs et visualisation artistique.",
                lbl_search: "Chercher s√©quence:", lbl_points: "Points √† dessiner:",
                btn_search: "CHERCHER", btn_reset: "‚Ü∫ ART", btn_save: "üíæ PNG",
                txt_ready: "Entrez des nombres √† chercher dans les 10 000 premiers chiffres.",
                msg_found: "Trouv√© ! Position {pos}", msg_not_found: "Non trouv√© dans les 10 000 premiers chiffres.",
                ph_search: "1415...",
                canvas_note: "Chaque ligne connecte un chiffre au suivant.",
                h_how: "Comment √ßa marche",
                p_how: "Ce labo a charg√© les 10 000 premi√®res d√©cimales de Pi. Lors de la recherche, il illumine uniquement le chemin form√© par vos nombres lorsqu'ils se connectent entre eux dans le cercle.",
                h_what: "Qu'est-ce que Pi?", p1: "Le rapport circonf√©rence/diam√®tre.",
                h_normal: "Normalit√©", p2: "Contient toutes les s√©quences finies.",
                h_art: "Visualisation", p3: "Connexions circulaires cr√©ant une toile.",
                legal: "Mentions", privacy: "Confidentialit√©", cookies: "Cookies", contact: "Contact", coffee: "Caf√©",
                rights: "¬© 2025 Graphics Labs", ad_text: "Espace Pub"
            },
            'de': {
                nav_main: "‚Üê HAUPT-HUB", nav_math: "‚Üê MATH HUB",
                title: "PROJEKT PI (œÄ)", desc: "Mustersuche und k√ºnstlerische Visualisierung.",
                lbl_search: "Sequenz suchen:", lbl_points: "Punkte:",
                btn_search: "SUCHEN", btn_reset: "‚Ü∫ ART", btn_save: "üíæ PNG",
                txt_ready: "Zahlen eingeben (Suche in 10.000 Ziffern).",
                msg_found: "Gefunden! Position {pos}", msg_not_found: "Nicht gefunden.",
                ph_search: "1415...",
                canvas_note: "Linien verbinden Ziffern im Kreis.",
                h_how: "Wie es funktioniert",
                p_how: "Dieses Labor hat die ersten 10.000 Dezimalstellen von Pi geladen. Bei der Suche beleuchtet das System ausschlie√ülich den Pfad, den Ihre Zahlen bilden, wenn sie sich im Kreis verbinden.",
                h_what: "Was ist Pi?", p1: "Verh√§ltnis Umfang/Durchmesser.",
                h_normal: "Normalit√§t", p2: "Enth√§lt alle Sequenzen.",
                h_art: "Visualisierung", p3: "Kreisverbindungen als Netz.",
                legal: "Impressum", privacy: "Datenschutz", cookies: "Cookies", contact: "Kontakt", coffee: "Kaffee",
                rights: "¬© 2025 Graphics Labs", ad_text: "Werbung"
            },
            'pt': {
                nav_main: "‚Üê HUB PRINCIPAL", nav_math: "‚Üê HUB MATH",
                title: "PROJETO PI (œÄ)", desc: "Buscador de padr√µes.",
                lbl_search: "Buscar sequ√™ncia:", lbl_points: "Pontos:",
                btn_search: "BUSCAR", btn_reset: "‚Ü∫ ART", btn_save: "üíæ PNG",
                txt_ready: "Digite n√∫meros (busca em 10.000 d√≠gitos).",
                msg_found: "Encontrado! Posi√ß√£o {pos}", msg_not_found: "N√£o encontrado.",
                ph_search: "1415...",
                canvas_note: "Linhas conectam d√≠gitos no c√≠rculo.",
                h_how: "Como funciona",
                p_how: "Este laborat√≥rio carregou os primeiros 10.000 decimais de Pi. Ao buscar, o sistema ilumina apenas o caminho formado pelos seus n√∫meros conectando-se no c√≠rculo.",
                h_what: "O que √© Pi?", p1: "Raz√£o circunfer√™ncia/di√¢metro.",
                h_normal: "Normalidade", p2: "Cont√©m todas as sequ√™ncias.",
                h_art: "Visualiza√ß√£o", p3: "Conex√µes circulares.",
                legal: "Aviso", privacy: "Privacidade", cookies: "Cookies", contact: "Contato", coffee: "Caf√©",
                rights: "¬© 2025 Graphics Labs", ad_text: "Publicidade"
            },
            'it': {
                nav_main: "‚Üê HUB PRINCIPALE", nav_math: "‚Üê HUB MATH",
                title: "PROGETTO PI (œÄ)", desc: "Ricerca schemi.",
                lbl_search: "Cerca sequenza:", lbl_points: "Punti:",
                btn_search: "CERCA", btn_reset: "‚Ü∫ ART", btn_save: "üíæ PNG",
                txt_ready: "Inserisci numeri (cerca in 10.000 cifre).",
                msg_found: "Trovato! Posizione {pos}", msg_not_found: "Non trovato.",
                ph_search: "1415...",
                canvas_note: "Linee collegano le cifre.",
                h_how: "Come funziona",
                p_how: "Questo laboratorio ha caricato i primi 10.000 decimali di Pi. Cercando, il sistema illumina solo il percorso formato dai tuoi numeri che si collegano nel cerchio.",
                h_what: "Cos'√® Pi?", p1: "Rapporto circonferenza/diametro.",
                h_normal: "Normalit√†", p2: "Contiene tutte le sequenze.",
                h_art: "Visualizzazione", p3: "Connessioni circolari.",
                legal: "Legale", privacy: "Privacy", cookies: "Cookies", contact: "Contatto", coffee: "Caff√®",
                rights: "¬© 2025 Graphics Labs", ad_text: "Pubblicit√†"
            },
            'nl': {
                nav_main: "‚Üê HOOFDHUB", nav_math: "‚Üê MATH HUB",
                title: "PROJECT PI (œÄ)", desc: "Patroon zoeker.",
                lbl_search: "Zoek reeks:", lbl_points: "Punten:",
                btn_search: "ZOEKEN", btn_reset: "‚Ü∫ ART", btn_save: "üíæ PNG",
                txt_ready: "Voer getallen in.",
                msg_found: "Gevonden! Positie {pos}", msg_not_found: "Niet gevonden.",
                ph_search: "1415...",
                canvas_note: "Lijnen verbinden cijfers.",
                h_how: "Hoe het werkt",
                p_how: "Dit lab heeft de eerste 10.000 decimalen van Pi geladen. Bij het zoeken verlicht het systeem alleen het pad dat door uw getallen wordt gevormd.",
                h_what: "Wat is Pi?", p1: "Verhouding omtrek/diameter.",
                h_normal: "Normaliteit", p2: "Bevat alle reeksen.",
                h_art: "Visualisatie", p3: "Cirkel verbindingen.",
                legal: "Juridisch", privacy: "Privacy", cookies: "Cookies", contact: "Contact", coffee: "Koffie",
                rights: "¬© 2025 Graphics Labs", ad_text: "Advertentie"
            },
            'ja': {
                nav_main: "‚Üê „É°„Ç§„É≥„Éè„Éñ", nav_math: "‚Üê Êï∞Â≠¶„Éè„Éñ",
                title: "„Éó„É≠„Ç∏„Çß„ÇØ„Éà œÄ", desc: "„Éë„Çø„Éº„É≥Ê§úÁ¥¢„ÄÇ",
                lbl_search: "Ê§úÁ¥¢:", lbl_points: "ÁÇπ:",
                btn_search: "Ê§úÁ¥¢", btn_reset: "‚Ü∫ ART", btn_save: "‰øùÂ≠ò",
                txt_ready: "Êï∞Â≠ó„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
                msg_found: "Áô∫Ë¶ãÔºÅ ‰ΩçÁΩÆ {pos}", msg_not_found: "Ë¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ",
                ph_search: "1415...",
                canvas_note: "Êï∞Â≠ó„Çí„Å§„Å™„ÅêÁ∑ö„ÄÇ",
                h_how: "‰ªïÁµÑ„Åø",
                p_how: "„Åì„ÅÆ„É©„Éú„ÅØÂÜÜÂë®Áéá„ÅÆÊúÄÂàù„ÅÆ10,000Ê°Å„ÇíË™≠„ÅøËæº„Åø„Åæ„Åó„Åü„ÄÇÊ§úÁ¥¢„Åô„Çã„Å®„ÄÅ„Ç∑„Çπ„ÉÜ„É†„ÅØ„ÅÇ„Å™„Åü„ÅÆÊï∞Â≠ó„ÅåÂÜÜ„ÅÆ‰∏≠„Åß„Å§„Å™„Åå„Å£„Å¶ÂΩ¢Êàê„Åô„Çã„Éë„Çπ„ÅÆ„Åø„ÇíÁÖß„Çâ„Åó„Åæ„Åô„ÄÇ",
                h_what: "œÄ„Å®„ÅØ?", p1: "ÂÜÜÂë®Áéá„ÄÇ",
                h_normal: "Ê≠£Ë¶èÊÄß", p2: "„Åô„Åπ„Å¶„ÅÆÈÖçÂàó„ÇíÂê´„ÇÄ„ÄÇ",
                h_art: "Ë¶ñË¶öÂåñ", p3: "ÂÜÜÂΩ¢„ÅÆÊé•Á∂ö„ÄÇ",
                legal: "Ê≥ïÁöÑ", privacy: "„Éó„É©„Ç§„Éê„Ç∑„Éº", cookies: "„ÇØ„ÉÉ„Ç≠„Éº", contact: "ÈÄ£Áµ°ÂÖà", coffee: "„Ç≥„Éº„Éí„Éº",
                rights: "¬© 2025 Graphics Labs", ad_text: "Â∫ÉÂëä"
            }
        };

        let currentLang = 'es';

        function setLang(lang) {
            localStorage.setItem('gl_lang', lang);
            currentLang = lang;
            const t = translations[lang] || translations['es'];
            
            document.getElementById('nav-main').innerText = t.nav_main;
            document.getElementById('nav-math').innerText = t.nav_math;
            document.getElementById('txt-title').innerText = t.title;
            document.getElementById('txt-desc').innerText = t.desc;
            document.getElementById('lbl-search').innerText = t.lbl_search;
            document.getElementById('lbl-points').innerText = t.lbl_points;
            document.getElementById('btn-search').innerText = t.btn_search;
            document.getElementById('btn-reset').innerText = t.btn_reset;
            document.getElementById('btn-save').innerText = t.btn_save;
            
            // Textos din√°micos y placeholders
            document.getElementById('inp-search').placeholder = t.ph_search;
            
            // Solo actualizar txt_ready si no hay un resultado mostrado
            if(!document.getElementById('result-display').innerHTML.includes('highlight-text') && 
               !document.getElementById('result-display').innerHTML.includes('color:#ff4444')) {
                document.getElementById('result-display').innerText = t.txt_ready;
            }

            document.getElementById('txt-canvas-note').innerText = t.canvas_note;

            document.getElementById('info-h-how').innerText = t.h_how;
            document.getElementById('info-p-how').innerText = t.p_how;
            document.getElementById('info-h-what').innerText = t.h_what;
            document.getElementById('info-p1').innerText = t.p1;
            document.getElementById('info-h-normal').innerText = t.h_normal;
            document.getElementById('info-p2').innerText = t.p2;
            document.getElementById('info-h-art').innerText = t.h_art;
            document.getElementById('info-p3').innerText = t.p3;

            document.getElementById('link-legal').innerText = t.legal;
            document.getElementById('link-privacy').innerText = t.privacy;
            document.getElementById('link-cookies').innerText = t.cookies;
            document.getElementById('link-contact').innerText = t.contact;
            document.getElementById('btn-coffee').innerText = t.coffee;
            
            // Footer credits & Ad
            document.getElementById('footer-rights').innerText = t.rights;
            document.querySelector('.ad-placeholder-text').innerText = t.ad_text;

            document.querySelectorAll('.lang-switch button').forEach(b => b.classList.remove('active'));
            document.getElementById('btn-' + lang).classList.add('active');
        }

        /* --- 5. FONDO ANIMADO --- */
        const bgCanvas = document.getElementById('bg-canvas');
        const bgCtx = bgCanvas.getContext('2d');
        let particlesArray = [];
        
        function resizeBg() {
            bgCanvas.width = window.innerWidth;
            bgCanvas.height = window.innerHeight;
        }
        window.addEventListener('resize', () => { resizeBg(); initParticles(); });
        resizeBg();

        const mouse = { x: null, y: null, radius: 150 };
        window.addEventListener('mousemove', (e) => { mouse.x = e.x; mouse.y = e.y; });

        class Particle {
            constructor() {
                this.x = Math.random() * bgCanvas.width;
                this.y = Math.random() * bgCanvas.height;
                this.size = Math.random() * 12 + 8;
                this.speedX = (Math.random() * 1) - 0.5;
                this.speedY = (Math.random() * 1) - 0.5;
                const symbols = ['œÄ', '3', '1', '4', '1', '5', '9', '2', '6', '5', '3'];
                this.text = symbols[Math.floor(Math.random() * symbols.length)];
            }
            draw() {
                bgCtx.font = this.size + 'px monospace';
                bgCtx.fillStyle = 'rgba(0, 255, 65, 0.15)'; 
                bgCtx.fillText(this.text, this.x, this.y);
            }
            update() {
                this.x += this.speedX;
                this.y += this.speedY;

                if (mouse.x != null) {
                    let dx = mouse.x - this.x;
                    let dy = mouse.y - this.y;
                    let dist = Math.sqrt(dx*dx + dy*dy);
                    if (dist < mouse.radius) {
                        const forceDirectionX = dx / dist;
                        const forceDirectionY = dy / dist;
                        const force = (mouse.radius - dist) / mouse.radius;
                        this.x -= forceDirectionX * force * 5;
                        this.y -= forceDirectionY * force * 5;
                    }
                }

                if (this.x > bgCanvas.width) this.x = 0;
                if (this.x < 0) this.x = bgCanvas.width;
                if (this.y > bgCanvas.height) this.y = 0;
                if (this.y < 0) this.y = bgCanvas.height;
                this.draw();
            }
        }

        function initParticles() {
            particlesArray = [];
            let n = (bgCanvas.height * bgCanvas.width) / 9000;
            for (let i = 0; i < n; i++) particlesArray.push(new Particle());
        }
        
        function animateParticles() {
            bgCtx.clearRect(0, 0, bgCanvas.width, bgCanvas.height);
            for (let i = 0; i < particlesArray.length; i++) particlesArray[i].update();
            requestAnimationFrame(animateParticles);
        }
        initParticles();
        animateParticles();

        // INIT
        const savedLang = localStorage.getItem('gl_lang') || 'es';
        setLang(savedLang);
        setTimeout(() => drawArt(null), 100);

    </script>
</body>
</html>
