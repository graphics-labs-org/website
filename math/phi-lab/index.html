<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Phi (œÜ) | Graphics Labs</title>
    <meta name="description" content="Visualizador de Filotaxis y Proporci√≥n √Åurea.">
    <style>
        /* --- ESTILOS BASE (IDENTICOS A PROYECTO PI) --- */
        :root {
            --primary: #00ff41; 
            --primary-dim: rgba(0, 255, 65, 0.3);
            --secondary: #bd00ff;
            --highlight: #ffee00;
            --glass: rgba(20, 20, 20, 0.7);
            --glass-text: rgba(30, 30, 30, 0.8);
            --border: rgba(255, 255, 255, 0.1);
            --text: #ffffff;
            --muted: #aaaaaa;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', monospace, sans-serif; }
        
        body {
            background-color: #050505;
            color: var(--text);
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            user-select: none;
        }

        #bg-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; }

        .container {
            position: relative;
            z-index: 10;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* --- CONTROLES ESPECIFICOS PHI --- */
        .controls {
            background: var(--glass);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin: 20px auto;
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .slider-group {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        input[type=range] {
            -webkit-appearance: none;
            width: 80%;
            height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            outline: none;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            box-shadow: 0 0 10px var(--primary);
            transition: 0.2s;
        }
        input[type=range]::-webkit-slider-thumb:hover { transform: scale(1.2); }

        .value-display {
            font-family: 'Courier New', monospace;
            color: var(--highlight);
            font-size: 1.2rem;
            font-weight: bold;
        }

        .buttons-row {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 10px;
        }

        button.action-btn {
            background: var(--primary);
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
            text-transform: uppercase;
            font-size: 0.9rem;
            min-width: 140px;
        }
        button.action-btn:hover { box-shadow: 0 0 15px var(--primary); transform: scale(1.05); }
        
        button.secondary-btn {
            background: transparent;
            border: 1px solid var(--secondary);
            color: var(--secondary);
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        button.secondary-btn:hover { background: var(--secondary); color: #fff; box-shadow: 0 0 15px var(--secondary); transform: scale(1.05); }

        /* --- CANVAS --- */
        #canvas-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            margin-bottom: 20px;
            position: relative;
            z-index: 10;
        }

        #phi-canvas {
            background: #000;
            border: 1px solid var(--border);
            border-radius: 50%;
            box-shadow: 0 0 30px rgba(189, 0, 255, 0.2); /* Morado para Phi */
            margin-bottom: 15px;
            max-width: 100%;
        }

        /* --- INFO SECTIONS --- */
        .info-section {
            background: var(--glass-text);
            padding: 40px;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin: 40px auto;
            max-width: 900px;
            text-align: left;
            line-height: 1.8;
            color: #ddd;
        }
        .info-section h2 { color: var(--secondary); margin-bottom: 20px; font-size: 1.5rem; text-transform: uppercase; letter-spacing: 1px; border-bottom: 1px solid var(--border); padding-bottom: 10px; margin-top: 40px; }
        .info-section h2:first-child { margin-top: 0; }
        .info-section p { margin-bottom: 20px; font-size: 1rem; text-align: justify; }

        .dl-section {
            margin-top: 30px;
            border-top: 1px dashed var(--border);
            padding-top: 20px;
            text-align: center;
        }

        .btn-txt-dl {
            display: inline-block;
            background: rgba(255, 255, 255, 0.1);
            color: var(--muted);
            text-decoration: none;
            padding: 15px 25px;
            border: 1px solid var(--muted);
            border-radius: 4px;
            font-family: var(--font-mono);
            font-size: 0.9rem;
            transition: 0.3s;
            cursor: pointer;
        }
        .btn-txt-dl:hover {
            background: var(--secondary);
            color: #fff;
            border-color: var(--secondary);
            box-shadow: 0 0 10px var(--secondary);
        }

        /* --- ADS & NAV --- */
        .ad-container {
            width: 100%; max-width: 728px; margin: 30px auto; min-height: 90px;
            display: flex; justify-content: center; align-items: center;
            border: 1px dashed rgba(255,255,255,0.1); border-radius: 8px; background: rgba(0,0,0,0.2);
        }
        .ad-placeholder-text { color: var(--border); font-size: 0.8rem; text-transform: uppercase; letter-spacing: 2px; }

        nav { display: flex; flex-wrap: wrap; gap: 20px; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .nav-links { display: flex; gap: 15px; }
        .nav-btn { text-decoration: none; color: var(--muted); font-size: 0.9rem; border: 1px solid var(--border); padding: 5px 10px; border-radius: 4px; transition: 0.3s; background: rgba(0,0,0,0.5); }
        .nav-btn:hover { color: var(--primary); border-color: var(--primary); }
        .logo { font-size: 1.2rem; font-weight: bold; color: var(--primary); text-decoration: none; letter-spacing: 2px; }
        
        .lang-switch button { background: rgba(0,0,0,0.5); border: 1px solid var(--border); color: var(--muted); padding: 5px 10px; cursor: pointer; border-radius: 4px; margin-left: 2px;}
        .lang-switch button.active { background-color: var(--primary) !important; color: #000 !important; border-color: var(--primary) !important; font-weight: bold; }
        
        footer { margin-top: auto; background: rgba(0,0,0,0.9); backdrop-filter: blur(5px); border-top: 1px solid var(--border); padding: 30px 20px; text-align: center; font-size: 0.8rem; color: var(--muted); display: flex; flex-direction: column; gap: 15px; align-items: center; position: relative; z-index: 20; }
        .legal-links { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; margin-bottom: 10px; }
        .legal-links a { color: var(--muted); text-decoration: none; transition: 0.3s; border-bottom: 1px solid transparent; }
        .legal-links a:hover { color: var(--primary); border-bottom-color: var(--primary); }
        .coffee-btn { background: linear-gradient(45deg, #FFDD00, #FBB03B); color: #000; padding: 8px 15px; border-radius: 20px; text-decoration: none; font-weight: bold; font-size: 0.85rem; display: inline-flex; align-items: center; gap: 5px; transition: transform 0.2s; }
        .coffee-btn:hover { transform: scale(1.05); }

    </style>
</head>
<body oncontextmenu="return false;">

    <canvas id="bg-canvas"></canvas>

    <div class="container">
        <nav>
            <div class="nav-links">
                <a href="../../index.html" class="nav-btn" id="nav-main">‚Üê HUB PRINCIPAL</a>
                <a href="../index.html" class="nav-btn" id="nav-math">‚Üê HUB MATH</a>
            </div>
            <div class="logo">GRAPHICS LABS</div>
            <div class="lang-switch">
                <button onclick="setLang('es')" id="btn-es" class="active">ES</button>
                <button onclick="setLang('ca')" id="btn-ca">CA</button>
                <button onclick="setLang('en')" id="btn-en">EN</button>
                <button onclick="setLang('fr')" id="btn-fr">FR</button>
                <button onclick="setLang('de')" id="btn-de">DE</button>
                <button onclick="setLang('pt')" id="btn-pt">PT</button>
                <button onclick="setLang('it')" id="btn-it">IT</button>
                <button onclick="setLang('nl')" id="btn-nl">NL</button>
                <button onclick="setLang('ja')" id="btn-ja">JP</button>
            </div>
        </nav>

        <h1 id="txt-title">PROYECTO PHI (œÜ)</h1>
        <p style="color:var(--muted); margin-bottom: 20px;" id="txt-desc">Generador de Filotaxis y la Proporci√≥n √Åurea.</p>

        <div class="controls">
            
            <div class="slider-group">
                <label id="lbl-angle">√Ångulo de Crecimiento:</label>
                <input type="range" id="slider-angle" min="0" max="360" step="0.1" value="137.5" oninput="updateArt()">
                <div class="value-display"><span id="val-angle">137.5</span>¬∞</div>
            </div>

            <div class="slider-group">
                <label id="lbl-points">Cantidad de Semillas:</label>
                <input type="range" id="slider-count" min="100" max="3000" step="10" value="800" oninput="updateArt()">
                <div class="value-display" id="val-count">800</div>
            </div>
            
            <div class="slider-group">
                <label id="lbl-zoom">Zoom / Dispersi√≥n:</label>
                <input type="range" id="slider-c" min="2" max="20" step="0.5" value="8" oninput="updateArt()">
            </div>

            <div class="buttons-row">
                <button class="action-btn" onclick="resetToGolden()" id="btn-golden">RESET √ÅUREO</button>
                <button class="secondary-btn" onclick="toggleColor()" id="btn-color">üé® COLOR</button>
                <button class="secondary-btn" onclick="setGradientMode()" id="btn-gradient" style="background: linear-gradient(45deg, var(--primary-dim), rgba(189, 0, 255, 0.3)); border:1px solid var(--primary); color: #fff;">üåà GRADIENTE</button>
                <button class="secondary-btn" onclick="saveImage()" id="btn-save">üíæ IMG</button>
            </div>
        </div>

        <div id="canvas-container">
            <canvas id="phi-canvas" width="800" height="800"></canvas>
            <p style="color:var(--muted); font-size: 0.8rem; margin-top:5px;" id="txt-note">Observa c√≥mo el √°ngulo de 137.5¬∞ crea el empaquetado perfecto.</p>
        </div>

        <div class="info-section">
            <h2 id="info-h-nature">La Geometr√≠a de la Naturaleza</h2>
            <p id="info-p-nature">
                La filotaxis es el patr√≥n que utilizan las plantas para organizar sus hojas y semillas. La naturaleza descubri√≥ que utilizando un √°ngulo muy espec√≠fico, puede empaquetar la mayor cantidad de semillas en el menor espacio posible sin que se solapen.
            </p>

            <h2 id="info-h-golden">El √Ångulo √Åureo</h2>
            <p id="info-p-golden">
                Ese √°ngulo m√°gico es aproximadamente 137.508¬∞, conocido como el √Ångulo √Åureo. Se deriva del N√∫mero √Åureo (Phi, œÜ = 1.618...). En este laboratorio, puedes mover el control deslizante. Nota c√≥mo una desviaci√≥n de tan solo 0.1 grados destruye la espiral perfecta y crea l√≠neas rectas o caos ineficiente.
            </p>
            
            <h2 id="info-h-fib">La Secuencia de Fibonacci</h2>
            <p id="info-p-fib">
                Estrechamente relacionada con Phi est√° la secuencia de Fibonacci (1, 1, 2, 3, 5, 8, 13...). Si cuentas las espirales en un girasol hacia la izquierda y hacia la derecha, casi siempre obtendr√°s dos n√∫meros vecinos de esta secuencia.
            </p>

            <div class="dl-section">
                <h3 style="color:var(--secondary); margin-bottom:15px;" id="h-dl-fib">Descarga de Datos</h3>
                <p id="p-dl-fib" style="font-size:0.9rem;">
                    Genera y descarga instant√°neamente los primeros 1000 n√∫meros de la secuencia de Fibonacci para tus propios an√°lisis matem√°ticos.
                </p>
                <button onclick="downloadFibonacci()" class="btn-txt-dl" id="btn-dl-fib">
                    ‚¨á Descargar Secuencia Fibonacci (.txt)
                </button>
            </div>
        </div>

        <div class="ad-container"><span class="ad-placeholder-text">Ad Space</span></div>
    </div>

    <footer>
        <div class="legal-links">
            <a href="../../legal.html" id="link-legal">Aviso Legal</a>
            <a href="../../privacy.html" id="link-privacy">Pol√≠tica de Privacidad</a>
            <a href="../../cookies.html" id="link-cookies">Pol√≠tica de Cookies</a>
            <a href="mailto:pbazan@gmail.com" id="link-contact">Contacto</a>
        </div>
        <span id="footer-rights">¬© 2025 Graphics Labs</span>
        <a href="https://paypal.me/pbazan" target="_blank" class="coffee-btn">
            ‚òï <span id="btn-coffee">Inv√≠tame a un caf√©</span>
        </a>
    </footer>

    <script>
        /* --- 1. CONFIGURACI√ìN Y VARIABLES --- */
        const canvas = document.getElementById('phi-canvas');
        const ctx = canvas.getContext('2d');
        
        // Elementos UI
        const sliderAngle = document.getElementById('slider-angle');
        const sliderCount = document.getElementById('slider-count');
        const sliderC = document.getElementById('slider-c');
        const valAngle = document.getElementById('val-angle');
        const valCount = document.getElementById('val-count');
        
        let colorMode = 0; // 0: Blanco/Verde, 1: Arcoiris, 2: C√≠clico, 3: Gradiente

        /* --- 2. MOTOR MATEM√ÅTICO (FILOTAXIS) --- */
        function drawPhyllotaxis() {
            // Limpiar
            ctx.fillStyle = "#000";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            const angle = parseFloat(sliderAngle.value);
            const count = parseInt(sliderCount.value);
            const c = parseFloat(sliderC.value); // Escala/Dispersi√≥n

            const cx = canvas.width / 2;
            const cy = canvas.height / 2;

            // Actualizar textos
            valAngle.innerText = angle.toFixed(1);
            valCount.innerText = count;

            // Dibujar puntos
            for (let n = 0; n < count; n++) {
                // F√≥rmulas polares de filotaxis
                const a = n * (angle * Math.PI / 180);
                const r = c * Math.sqrt(n);

                // Convertir polar a cartesiano
                const x = r * Math.cos(a) + cx;
                const y = r * Math.sin(a) + cy;

                // Estilos seg√∫n modo de color
                ctx.beginPath();
                
                if (colorMode === 0) {
                    // Estilo Sci-Fi cl√°sico (Verde/Blanco)
                    const dist = r / (canvas.width/2); 
                    ctx.fillStyle = `rgba(${100 + dist*155}, 255, ${100 + dist*155}, ${1 - dist*0.5})`;
                    ctx.arc(x, y, 3, 0, Math.PI * 2);
                } else if (colorMode === 1) {
                    // Arcoiris radial
                    ctx.fillStyle = `hsl(${n % 360}, 80%, 50%)`;
                    ctx.arc(x, y, 3, 0, Math.PI * 2);
                } else if (colorMode === 2) {
                    // Distancia al centro (C√°lido)
                    ctx.fillStyle = `hsl(${r * 0.8}, 70%, 50%)`;
                    ctx.arc(x, y, 4, 0, Math.PI * 2);
                } else if (colorMode === 3) {
                    // NUEVO: Degradado Lineal Art√≠stico (Verde a Morado)
                    const ratio = x / canvas.width; 
                    
                    // Interpolaci√≥n lineal RGB
                    // Inicio (Verde): 0, 255, 65
                    // Fin (Morado): 189, 0, 255
                    const rVal = 0 + ratio * (189 - 0);
                    const gVal = 255 + ratio * (0 - 255);
                    const bVal = 65 + ratio * (255 - 65);

                    ctx.fillStyle = `rgb(${rVal}, ${gVal}, ${bVal})`;
                    ctx.arc(x, y, 4.5, 0, Math.PI * 2); 
                }
                
                ctx.fill();
            }
        }

        /* --- 3. INTERACTIVIDAD --- */
        function updateArt() {
            requestAnimationFrame(drawPhyllotaxis);
        }

        function resetToGolden() {
            sliderAngle.value = 137.5;
            sliderCount.value = 800;
            sliderC.value = 8;
            colorMode = 0;
            updateArt();
        }

        function toggleColor() {
            // Cicla entre 0, 1 y 2
            if (colorMode === 3) colorMode = 0; // Si venimos de gradiente, volver a base
            else colorMode = (colorMode + 1) % 3;
            updateArt();
        }

        function setGradientMode() {
            colorMode = 3;
            updateArt();
        }

        function saveImage() {
            const link = document.createElement('a');
            link.download = `phi_art_${sliderAngle.value}_degrees.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        // GENERADOR FIBONACCI (DESCARGA)
        function downloadFibonacci() {
            let n1 = 0n, n2 = 1n, nextTerm;
            let content = "PROJECT PHI - FIBONACCI SEQUENCE (First 1000 terms)\n";
            content += "====================================================\n\n";
            
            content += `1: ${n1}\n`;
            content += `2: ${n2}\n`;

            for (let i = 3; i <= 1000; i++) {
                nextTerm = n1 + n2;
                content += `${i}: ${nextTerm}\n`;
                n1 = n2;
                n2 = nextTerm;
            }

            content += "\nGenerated by Graphics Labs.";

            const blob = new Blob([content], { type: 'text/plain' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'fibonacci_sequence_1000.txt';
            link.click();
        }

        /* --- 4. MULTI-IDIOMA --- */
        const translations = {
            'es': {
                nav_main: "‚Üê HUB PRINCIPAL", nav_math: "‚Üê HUB MATH",
                title: "PROYECTO PHI (œÜ)", desc: "Generador de Filotaxis y la Proporci√≥n √Åurea.",
                lbl_angle: "√Ångulo de Crecimiento:", lbl_points: "Cantidad de Semillas:", lbl_zoom: "Zoom / Dispersi√≥n:",
                btn_golden: "RESET √ÅUREO", btn_color: "üé® COLOR", btn_gradient: "üåà GRADIENTE", btn_save: "üíæ IMG",
                txt_note: "Observa c√≥mo el √°ngulo de 137.5¬∞ crea el empaquetado perfecto.",
                h_nature: "La Geometr√≠a de la Naturaleza",
                p_nature: "La filotaxis es el patr√≥n que utilizan las plantas para organizar sus hojas y semillas. La naturaleza descubri√≥ que utilizando un √°ngulo muy espec√≠fico, puede empaquetar la mayor cantidad de semillas en el menor espacio posible sin que se solapen.",
                h_golden: "El √Ångulo √Åureo",
                p_golden: "Ese √°ngulo m√°gico es aproximadamente 137.508¬∞, conocido como el √Ångulo √Åureo. Se deriva del N√∫mero √Åureo (Phi, œÜ = 1.618...). En este laboratorio, puedes mover el control deslizante. Nota c√≥mo una desviaci√≥n de tan solo 0.1 grados destruye la espiral perfecta y crea l√≠neas rectas o caos ineficiente.",
                h_fib: "La Secuencia de Fibonacci",
                p_fib: "Estrechamente relacionada con Phi est√° la secuencia de Fibonacci (1, 1, 2, 3, 5, 8, 13...). Si cuentas las espirales en un girasol hacia la izquierda y hacia la derecha, casi siempre obtendr√°s dos n√∫meros vecinos de esta secuencia.",
                h_dl_fib: "Descarga de Datos", p_dl_fib: "Genera y descarga instant√°neamente los primeros 1000 n√∫meros de la secuencia de Fibonacci para tus propios an√°lisis.",
                btn_dl_fib: "‚¨á Descargar Fibonacci (.txt)",
                legal: "Aviso Legal", privacy: "Pol√≠tica Privacidad", cookies: "Cookies", contact: "Contacto", coffee: "Inv√≠tame a un caf√©", rights: "¬© 2025 Graphics Labs", ad_text: "Ad Space"
            },
            'en': {
                nav_main: "‚Üê MAIN HUB", nav_math: "‚Üê MATH HUB",
                title: "PROJECT PHI (œÜ)", desc: "Phyllotaxis Generator and the Golden Ratio.",
                lbl_angle: "Growth Angle:", lbl_points: "Seed Count:", lbl_zoom: "Zoom / Spread:",
                btn_golden: "GOLDEN RESET", btn_color: "üé® COLOR", btn_gradient: "üåà GRADIENT", btn_save: "üíæ IMG",
                txt_note: "Observe how the 137.5¬∞ angle creates perfect packing.",
                h_nature: "The Geometry of Nature",
                p_nature: "Phyllotaxis is the pattern plants use to arrange their leaves and seeds. Nature discovered that by using a very specific angle, it can pack the most seeds in the smallest space possible without overlapping.",
                h_golden: "The Golden Angle",
                p_golden: "That magic angle is approximately 137.508¬∞, known as the Golden Angle. It is derived from the Golden Ratio (Phi, œÜ = 1.618...). In this lab, you can move the slider. Note how a deviation of just 0.1 degrees destroys the perfect spiral and creates straight lines or inefficient chaos.",
                h_fib: "The Fibonacci Sequence",
                p_fib: "Closely related to Phi is the Fibonacci sequence (1, 1, 2, 3, 5, 8, 13...). If you count the spirals on a sunflower to the left and to the right, you will almost always get two neighboring numbers from this sequence.",
                h_dl_fib: "Data Download", p_dl_fib: "Instantly generate and download the first 1000 numbers of the Fibonacci sequence for your own analysis.",
                btn_dl_fib: "‚¨á Download Fibonacci (.txt)",
                legal: "Legal Notice", privacy: "Privacy Policy", cookies: "Cookies", contact: "Contact", coffee: "Buy me a coffee", rights: "¬© 2025 Graphics Labs", ad_text: "Ad Space"
            },
            'ca': {
                nav_main: "‚Üê HUB PRINCIPAL", nav_math: "‚Üê HUB MATH",
                title: "PROJECTE PHI (œÜ)", desc: "Generador de Filotaxi i la Proporci√≥ √Äuria.",
                lbl_angle: "Angle de Creixement:", lbl_points: "Quantitat de Llavors:", lbl_zoom: "Zoom / Dispersi√≥:",
                btn_golden: "RESET AURI", btn_color: "üé® COLOR", btn_gradient: "üåà GRADIENT", btn_save: "üíæ IMG",
                txt_note: "Observa com l'angle de 137.5¬∞ crea l'empaquetament perfecte.",
                h_nature: "La Geometria de la Natura",
                p_nature: "La filotaxi √©s el patr√≥ que utilitzen les plantes per organitzar les seves fulles i llavors. La natura va descobrir que utilitzant un angle molt espec√≠fic, pot empaquetar la major quantitat de llavors en el menor espai possible sense que se superposin.",
                h_golden: "L'Angle Auri",
                p_golden: "Aquest angle m√†gic √©s aproximadament 137.508¬∞, conegut com l'Angle Auri. Es deriva del Nombre Auri (Phi, œÜ = 1.618...). En aquest laboratori, pots moure el control lliscant. Nota com una desviaci√≥ de nom√©s 0.1 graus destrueix l'espiral perfecta i crea l√≠nies rectes o caos ineficient.",
                h_fib: "La Seq√º√®ncia de Fibonacci",
                p_fib: "Estretament relacionada amb Phi est√† la seq√º√®ncia de Fibonacci (1, 1, 2, 3, 5, 8, 13...). Si comptes les espirals en un gira-sol cap a l'esquerra i cap a la dreta, gaireb√© sempre obtindr√†s dos nombres ve√Øns d'aquesta seq√º√®ncia.",
                h_dl_fib: "Desc√†rrega de Dades", p_dl_fib: "Genera i descarrega instant√†niament els primers 1000 nombres de la seq√º√®ncia de Fibonacci per a les teves an√†lisis.",
                btn_dl_fib: "‚¨á Descarregar Fibonacci (.txt)",
                legal: "Av√≠s Legal", privacy: "Pol√≠tica Privacitat", cookies: "Cookies", contact: "Contacte", coffee: "Convida'm a un caf√®", rights: "¬© 2025 Graphics Labs", ad_text: "Espai Publicitari"
            },
            'fr': {
                nav_main: "‚Üê HUB PRINCIPAL", nav_math: "‚Üê HUB MATH",
                title: "PROJET PHI (œÜ)", desc: "G√©n√©rateur de Phyllotaxie et Nombre d'Or.",
                lbl_angle: "Angle de Croissance :", lbl_points: "Nombre de Graines :", lbl_zoom: "Zoom / Dispersion :",
                btn_golden: "RESET OR", btn_color: "üé® COULEUR", btn_gradient: "üåà D√âGRAD√â", btn_save: "üíæ IMG",
                txt_note: "Observez comment l'angle de 137.5¬∞ cr√©e un empaquetage parfait.",
                h_nature: "La G√©om√©trie de la Nature",
                p_nature: "La phyllotaxie est le motif que les plantes utilisent pour disposer leurs feuilles et graines. La nature a d√©couvert qu'en utilisant un angle tr√®s sp√©cifique, elle peut empaqueter le plus de graines dans le plus petit espace possible sans chevauchement.",
                h_golden: "L'Angle d'Or",
                p_golden: "Cet angle magique est d'environ 137.508¬∞, connu sous le nom d'Angle d'Or. Il d√©rive du Nombre d'Or (Phi, œÜ = 1.618...). Dans ce laboratoire, vous pouvez d√©placer le curseur. Notez comment une d√©viation de seulement 0.1 degr√© d√©truit la spirale parfaite et cr√©e des lignes droites ou un chaos inefficace.",
                h_fib: "La Suite de Fibonacci",
                p_fib: "√âtroitement li√©e √† Phi est la suite de Fibonacci (1, 1, 2, 3, 5, 8, 13...). Si vous comptez les spirales d'un tournesol vers la gauche et vers la droite, vous obtiendrez presque toujours deux nombres voisins de cette suite.",
                h_dl_fib: "T√©l√©chargement de Donn√©es", p_dl_fib: "G√©n√©rez et t√©l√©chargez instantan√©ment les 1000 premiers nombres de la suite de Fibonacci pour vos analyses.",
                btn_dl_fib: "‚¨á T√©l√©charger Fibonacci (.txt)",
                legal: "Mentions L√©gales", privacy: "Confidentialit√©", cookies: "Cookies", contact: "Contact", coffee: "Offrez-moi un caf√©", rights: "¬© 2025 Graphics Labs", ad_text: "Espace Publicitaire"
            },
            'de': {
                nav_main: "‚Üê HAUPT-HUB", nav_math: "‚Üê MATH HUB",
                title: "PROJEKT PHI (œÜ)", desc: "Phyllotaxis-Generator und der Goldene Schnitt.",
                lbl_angle: "Wachstumswinkel:", lbl_points: "Samenanzahl:", lbl_zoom: "Zoom / Streuung:",
                btn_golden: "GOLDENER RESET", btn_color: "üé® FARBE", btn_gradient: "üåà VERLAUF", btn_save: "üíæ IMG",
                txt_note: "Beobachten Sie, wie der Winkel von 137,5¬∞ die perfekte Packung erzeugt.",
                h_nature: "Die Geometrie der Natur",
                p_nature: "Phyllotaxis ist das Muster, das Pflanzen verwenden, um ihre Bl√§tter und Samen anzuordnen. Die Natur hat entdeckt, dass sie durch die Verwendung eines sehr spezifischen Winkels die meisten Samen auf kleinstem Raum ohne √úberlappung packen kann.",
                h_golden: "Der Goldene Winkel",
                p_golden: "Dieser magische Winkel betr√§gt etwa 137,508¬∞ und ist als Goldener Winkel bekannt. Er leitet sich vom Goldenen Schnitt (Phi, œÜ = 1,618...) ab. In diesem Labor k√∂nnen Sie den Schieberegler bewegen. Beachten Sie, wie eine Abweichung von nur 0,1 Grad die perfekte Spirale zerst√∂rt und gerade Linien oder ineffizientes Chaos erzeugt.",
                h_fib: "Die Fibonacci-Folge",
                p_fib: "Eng verwandt mit Phi ist die Fibonacci-Folge (1, 1, 2, 3, 5, 8, 13...). Wenn Sie die Spiralen einer Sonnenblume nach links und rechts z√§hlen, erhalten Sie fast immer zwei benachbarte Zahlen dieser Folge.",
                h_dl_fib: "Daten-Download", p_dl_fib: "Generieren und laden Sie sofort die ersten 1000 Zahlen der Fibonacci-Folge f√ºr Ihre Analysen herunter.",
                btn_dl_fib: "‚¨á Fibonacci herunterladen (.txt)",
                legal: "Impressum", privacy: "Datenschutz", cookies: "Cookies", contact: "Kontakt", coffee: "Kauf mir einen Kaffee", rights: "¬© 2025 Graphics Labs", ad_text: "Werbung"
            },
            'pt': {
                nav_main: "‚Üê HUB PRINCIPAL", nav_math: "‚Üê HUB MATH",
                title: "PROJETO PHI (œÜ)", desc: "Gerador de Filotaxia e a Propor√ß√£o √Åurea.",
                lbl_angle: "√Çngulo de Crescimento:", lbl_points: "Quantidade de Sementes:", lbl_zoom: "Zoom / Dispers√£o:",
                btn_golden: "RESET √ÅUREO", btn_color: "üé® COR", btn_gradient: "üåà GRADIENTE", btn_save: "üíæ IMG",
                txt_note: "Observe como o √¢ngulo de 137.5¬∞ cria o empacotamento perfeito.",
                h_nature: "A Geometria da Natureza",
                p_nature: "Filotaxia √© o padr√£o que as plantas usam para organizar suas folhas e sementes. A natureza descobriu que, usando um √¢ngulo muito espec√≠fico, pode empacotar a maior quantidade de sementes no menor espa√ßo poss√≠vel sem sobreposi√ß√£o.",
                h_golden: "O √Çngulo √Åureo",
                p_golden: "Esse √¢ngulo m√°gico √© de aproximadamente 137.508¬∞, conhecido como o √Çngulo √Åureo. Deriva do N√∫mero √Åureo (Phi, œÜ = 1.618...). Neste laborat√≥rio, voc√™ pode mover o controle deslizante. Note como um desvio de apenas 0.1 graus destr√≥i a espiral perfeita e cria linhas retas ou caos ineficiente.",
                h_fib: "A Sequ√™ncia de Fibonacci",
                p_fib: "Estreitamente relacionada com Phi est√° a sequ√™ncia de Fibonacci (1, 1, 2, 3, 5, 8, 13...). Se voc√™ contar as espirais em um girassol para a esquerda e para a direita, quase sempre obter√° dois n√∫meros vizinhos desta sequ√™ncia.",
                h_dl_fib: "Download de Dados", p_dl_fib: "Gere e baixe instantaneamente os primeiros 1000 n√∫meros da sequ√™ncia de Fibonacci para suas an√°lises.",
                btn_dl_fib: "‚¨á Baixar Fibonacci (.txt)",
                legal: "Aviso Legal", privacy: "Privacidade", cookies: "Cookies", contact: "Contato", coffee: "Pagar um caf√©", rights: "¬© 2025 Graphics Labs", ad_text: "Publicidade"
            },
            'it': {
                nav_main: "‚Üê HUB PRINCIPALE", nav_math: "‚Üê HUB MATH",
                title: "PROGETTO PHI (œÜ)", desc: "Generatore di Fillotassi e Sezione Aurea.",
                lbl_angle: "Angolo di Crescita:", lbl_points: "Quantit√† di Semi:", lbl_zoom: "Zoom / Dispersione:",
                btn_golden: "RESET AUREO", btn_color: "üé® COLORE", btn_gradient: "üåà SFUMATURA", btn_save: "üíæ IMG",
                txt_note: "Osserva come l'angolo di 137.5¬∞ crea l'impacchettamento perfetto.",
                h_nature: "La Geometria della Natura",
                p_nature: "La fillotassi √® lo schema che le piante usano per disporre le foglie e i semi. La natura ha scoperto che usando un angolo molto specifico, pu√≤ impacchettare il maggior numero di semi nel minor spazio possibile senza sovrapposizioni.",
                h_golden: "L'Angolo Aureo",
                p_golden: "Quell'angolo magico √® di circa 137.508¬∞, noto come l'Angolo Aureo. Deriva dalla Sezione Aurea (Phi, œÜ = 1.618...). In questo laboratorio, puoi muovere il cursore. Nota come una deviazione di soli 0.1 gradi distrugge la spirale perfetta e crea linee rette o caos inefficiente.",
                h_fib: "La Sequenza di Fibonacci",
                p_fib: "Strettamente legata a Phi √® la sequenza di Fibonacci (1, 1, 2, 3, 5, 8, 13...). Se conti le spirali in un girasole verso sinistra e verso destra, otterrai quasi sempre due numeri vicini di questa sequenza.",
                h_dl_fib: "Download Dati", p_dl_fib: "Genera e scarica istantaneamente i primi 1000 numeri della sequenza di Fibonacci per le tue analisi.",
                btn_dl_fib: "‚¨á Scarica Fibonacci (.txt)",
                legal: "Note Legali", privacy: "Privacy", cookies: "Cookies", contact: "Contatto", coffee: "Offrimi un caff√®", rights: "¬© 2025 Graphics Labs", ad_text: "Pubblicit√†"
            },
            'nl': {
                nav_main: "‚Üê HOOFDHUB", nav_math: "‚Üê MATH HUB",
                title: "PROJECT PHI (œÜ)", desc: "Phyllotaxis Generator en de Gulden Snede.",
                lbl_angle: "Groeihiek:", lbl_points: "Aantal Zaden:", lbl_zoom: "Zoom / Spreiding:",
                btn_golden: "GULDEN RESET", btn_color: "üé® KLEUR", btn_gradient: "üåà VERLOOP", btn_save: "üíæ IMG",
                txt_note: "Merk op hoe de hoek van 137.5¬∞ de perfecte verpakking cre√´ert.",
                h_nature: "De Geometrie van de Natuur",
                p_nature: "Phyllotaxis is het patroon dat planten gebruiken om hun bladeren en zaden te rangschikken. De natuur ontdekte dat door een heel specifieke hoek te gebruiken, ze de meeste zaden in de kleinste ruimte kan verpakken zonder overlapping.",
                h_golden: "De Gulden Hoek",
                p_golden: "Die magische hoek is ongeveer 137.508¬∞, bekend als de Gulden Hoek. Het is afgeleid van de Gulden Snede (Phi, œÜ = 1.618...). In dit lab kunt u de schuifregelaar verplaatsen. Merk op hoe een afwijking van slechts 0.1 graden de perfecte spiraal vernietigt en rechte lijnen of ineffici√´nte chaos cre√´ert.",
                h_fib: "De Fibonacci Reeks",
                p_fib: "Nauw verwant aan Phi is de Fibonacci-reeks (1, 1, 2, 3, 5, 8, 13...). Als je de spiralen in een zonnebloem naar links en naar rechts telt, krijg je bijna altijd twee naburige getallen uit deze reeks.",
                h_dl_fib: "Gegevens Downloaden", p_dl_fib: "Genereer en download direct de eerste 1000 nummers van de Fibonacci-reeks voor uw analyses.",
                btn_dl_fib: "‚¨á Download Fibonacci (.txt)",
                legal: "Juridisch", privacy: "Privacy", cookies: "Cookies", contact: "Contact", coffee: "Koop koffie", rights: "¬© 2025 Graphics Labs", ad_text: "Advertentie"
            },
            'ja': {
                nav_main: "‚Üê „É°„Ç§„É≥„Éè„Éñ", nav_math: "‚Üê Êï∞Â≠¶„Éè„Éñ",
                title: "„Éó„É≠„Ç∏„Çß„ÇØ„Éà PHI (œÜ)", desc: "ËëâÂ∫è„Ç∏„Çß„Éç„É¨„Éº„Çø„Éº„Å®ÈªÑÈáëÊØî„ÄÇ",
                lbl_angle: "ÊàêÈï∑ËßíÂ∫¶:", lbl_points: "Á®Æ„ÅÆÊï∞:", lbl_zoom: "„Ç∫„Éº„É† / Â∫É„Åå„Çä:",
                btn_golden: "ÈªÑÈáë„É™„Çª„ÉÉ„Éà", btn_color: "üé® Ëâ≤Â§âÊõ¥", btn_gradient: "üåà „Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥", btn_save: "üíæ ÁîªÂÉè‰øùÂ≠ò",
                txt_note: "137.5¬∞„ÅÆËßíÂ∫¶„Åå„Å©„ÅÆ„Çà„ÅÜ„Å´ÂÆåÂÖ®„Å™„Éë„ÉÉ„Ç≠„É≥„Ç∞„ÇíÁîü„ÅøÂá∫„Åô„ÅãË¶≥ÂØü„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
                h_nature: "Ëá™ÁÑ∂„ÅÆÂπæ‰ΩïÂ≠¶",
                p_nature: "ËëâÂ∫èÔºà„Çà„ÅÜ„Åò„ÇáÔºâ„ÅØ„ÄÅÊ§çÁâ©„ÅåËëâ„ÇÑÁ®Æ„ÇíÈÖçÁΩÆ„Åô„Çã„Åü„ÇÅ„Å´‰ΩøÁî®„Åô„Çã„Éë„Çø„Éº„É≥„Åß„Åô„ÄÇËá™ÁÑ∂Áïå„ÅØ„ÄÅÈùûÂ∏∏„Å´ÁâπÂÆö„ÅÆËßíÂ∫¶„Çí‰ΩøÁî®„Åô„Çã„Åì„Å®„Åß„ÄÅÈáç„Å™„ÇäÂêà„ÅÜ„Åì„Å®„Å™„ÅèÊúÄÂ∞è„ÅÆ„Çπ„Éö„Éº„Çπ„Å´ÊúÄ„ÇÇÂ§ö„Åè„ÅÆÁ®Æ„ÇíË©∞„ÇÅËæº„ÇÄ„Åì„Å®„Åå„Åß„Åç„Çã„Åì„Å®„ÇíÁô∫Ë¶ã„Åó„Åæ„Åó„Åü„ÄÇ",
                h_golden: "ÈªÑÈáëËßí",
                p_golden: "„Åù„ÅÆÈ≠îÊ≥ï„ÅÆËßíÂ∫¶„ÅØÁ¥Ñ137.508¬∞„Åß„ÅÇ„Çä„ÄÅÈªÑÈáëËßí„Å®„Åó„Å¶Áü•„Çâ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åì„Çå„ÅØÈªÑÈáëÊØîÔºàPhi„ÄÅœÜ = 1.618...Ôºâ„Åã„ÇâÊ¥æÁîü„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åì„ÅÆ„É©„Éú„Åß„ÅØ„ÄÅ„Çπ„É©„Ç§„ÉÄ„Éº„ÇíÂãï„Åã„Åô„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ„Çè„Åö„Åã0.1Â∫¶„ÅÆÂÅèÂ∑Æ„Åå„ÄÅÂÆåÂÖ®„Å™Ëû∫Êóã„ÇíÁ†¥Â£ä„Åó„ÄÅÁõ¥Á∑ö„ÇÑÈùûÂäπÁéáÁöÑ„Å™„Ç´„Ç™„Çπ„ÇíÁîü„ÅøÂá∫„ÅôÊßòÂ≠ê„Å´Ê≥®ÁõÆ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
                h_fib: "„Éï„Ç£„Éú„Éä„ÉÉ„ÉÅÊï∞Âàó",
                p_fib: "Phi„Å®ÂØÜÊé•„Å´Èñ¢ÈÄ£„Åó„Å¶„ÅÑ„Çã„ÅÆ„Åå„Éï„Ç£„Éú„Éä„ÉÉ„ÉÅÊï∞ÂàóÔºà1, 1, 2, 3, 5, 8, 13...Ôºâ„Åß„Åô„ÄÇ„Éí„Éû„ÉØ„É™„ÅÆËû∫Êóã„ÇíÂ∑¶Âõû„Çä„Å®Âè≥Âõû„Çä„Å´Êï∞„Åà„Çã„Å®„ÄÅ„Åª„ÅºÂ∏∏„Å´„Åì„ÅÆÊï∞Âàó„ÅÆÈö£„ÇäÂêà„ÅÜ2„Å§„ÅÆÊï∞Â≠ó„ÅåÂæó„Çâ„Çå„Åæ„Åô„ÄÇ",
                h_dl_fib: "„Éá„Éº„Çø„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ", p_dl_fib: "ÂàÜÊûêÁî®„Å´„Éï„Ç£„Éú„Éä„ÉÉ„ÉÅÊï∞Âàó„ÅÆÊúÄÂàù„ÅÆ1000ÂÄã„ÅÆÊï∞Â≠ó„ÇíÂç≥Â∫ß„Å´ÁîüÊàê„Åó„Å¶„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åó„Åæ„Åô„ÄÇ",
                btn_dl_fib: "‚¨á „Éï„Ç£„Éú„Éä„ÉÉ„ÉÅ„ÇíDL (.txt)",
                legal: "Ê≥ïÁöÑÈÄöÁü•", privacy: "„Éó„É©„Ç§„Éê„Ç∑„Éº", cookies: "„ÇØ„ÉÉ„Ç≠„Éº", contact: "ÈÄ£Áµ°ÂÖà", coffee: "„Ç≥„Éº„Éí„Éº„ÇíÂ•¢„Çã", rights: "¬© 2025 Graphics Labs", ad_text: "Â∫ÉÂëä„Çπ„Éö„Éº„Çπ"
            }
        };

        let currentLang = 'es';

        function setLang(lang) {
            localStorage.setItem('gl_lang', lang);
            currentLang = lang;
            const t = translations[lang] || translations['es'];
            
            // Textos Base
            document.getElementById('nav-main').innerText = t.nav_main;
            document.getElementById('nav-math').innerText = t.nav_math;
            document.getElementById('txt-title').innerText = t.title;
            document.getElementById('txt-desc').innerText = t.desc;
            
            // Controles
            document.getElementById('lbl-angle').innerText = t.lbl_angle;
            document.getElementById('lbl-points').innerText = t.lbl_points;
            document.getElementById('lbl-zoom').innerText = t.lbl_zoom;
            document.getElementById('btn-golden').innerText = t.btn_golden;
            document.getElementById('btn-color').innerText = t.btn_color;
            document.getElementById('btn-gradient').innerText = t.btn_gradient;
            document.getElementById('btn-save').innerText = t.btn_save;
            document.getElementById('txt-note').innerText = t.txt_note;

            // Info
            document.getElementById('info-h-nature').innerText = t.h_nature;
            document.getElementById('info-p-nature').innerText = t.p_nature;
            document.getElementById('info-h-golden').innerText = t.h_golden;
            document.getElementById('info-p-golden').innerText = t.p_golden;
            document.getElementById('info-h-fib').innerText = t.h_fib;
            document.getElementById('info-p-fib').innerText = t.p_fib;

            // Descarga
            document.getElementById('h-dl-fib').innerText = t.h_dl_fib;
            document.getElementById('p-dl-fib').innerText = t.p_dl_fib;
            document.getElementById('btn-dl-fib').innerText = t.btn_dl_fib;

            // Footer
            document.getElementById('link-legal').innerText = t.legal;
            document.getElementById('link-privacy').innerText = t.privacy;
            document.getElementById('link-cookies').innerText = t.cookies;
            document.getElementById('link-contact').innerText = t.contact;
            document.getElementById('btn-coffee').innerText = t.coffee;
            document.getElementById('footer-rights').innerText = t.rights;
            document.querySelector('.ad-placeholder-text').innerText = t.ad_text;

            // Botones de idioma
            document.querySelectorAll('.lang-switch button').forEach(b => {
                b.classList.remove('active');
                if(b.id === 'btn-' + lang) b.classList.add('active');
            });
        }

        /* --- 5. FONDO ANIMADO --- */
        const bgCanvas = document.getElementById('bg-canvas');
        const bgCtx = bgCanvas.getContext('2d');
        let particlesArray = [];
        
        function resizeBg() {
            bgCanvas.width = window.innerWidth;
            bgCanvas.height = window.innerHeight;
        }
        window.addEventListener('resize', () => { resizeBg(); initParticles(); });
        resizeBg();

        const mouse = { x: null, y: null, radius: 150 };
        window.addEventListener('mousemove', (e) => { mouse.x = e.x; mouse.y = e.y; });

        class Particle {
            constructor() {
                this.x = Math.random() * bgCanvas.width;
                this.y = Math.random() * bgCanvas.height;
                this.size = Math.random() * 12 + 8;
                this.speedX = (Math.random() * 1) - 0.5;
                this.speedY = (Math.random() * 1) - 0.5;
                // Usamos el s√≠mbolo Phi
                const symbols = ['œÜ', '1', '6', '1', '8', '0', '3', '3', '9'];
                this.text = symbols[Math.floor(Math.random() * symbols.length)];
            }
            draw() {
                bgCtx.font = this.size + 'px monospace';
                // Tono morado para el fondo de Phi
                bgCtx.fillStyle = 'rgba(189, 0, 255, 0.15)'; 
                bgCtx.fillText(this.text, this.x, this.y);
            }
            update() {
                this.x += this.speedX;
                this.y += this.speedY;

                if (mouse.x != null) {
                    let dx = mouse.x - this.x;
                    let dy = mouse.y - this.y;
                    let distance = Math.sqrt(dx*dx + dy*dy);
                    if (distance < mouse.radius) {
                        const forceDirectionX = dx / distance;
                        const forceDirectionY = dy / distance;
                        const force = (mouse.radius - distance) / mouse.radius;
                        this.x -= forceDirectionX * force * 5;
                        this.y -= forceDirectionY * force * 5;
                    }
                }

                if (this.x > bgCanvas.width) this.x = 0;
                if (this.x < 0) this.x = bgCanvas.width;
                if (this.y > bgCanvas.height) this.y = 0;
                if (this.y < 0) this.y = bgCanvas.height;
                this.draw();
            }
        }

        function initParticles() {
            particlesArray = [];
            let n = (bgCanvas.height * bgCanvas.width) / 9000;
            for (let i = 0; i < n; i++) particlesArray.push(new Particle());
        }
        
        function animateParticles() {
            bgCtx.clearRect(0, 0, bgCanvas.width, bgCanvas.height);
            for (let i = 0; i < particlesArray.length; i++) particlesArray[i].update();
            requestAnimationFrame(animateParticles);
        }
        initParticles();
        animateParticles();

        // INIT
        const savedLang = localStorage.getItem('gl_lang') || 'es';
        setLang(savedLang);
        resetToGolden();

    </script>
</body>
</html>
