<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Chaos | Graphics Labs</title>
    <meta name="description" content="SimulaciÃ³n del Atractor de Lorenz y TeorÃ­a del Caos.">
    <style>
        /* --- ESTILOS BASE --- */
        :root {
            --primary: #00ff41; 
            --primary-dim: rgba(0, 255, 65, 0.3);
            --secondary: #bd00ff;
            --highlight: #ffee00;
            --glass: rgba(20, 20, 20, 0.7);
            --glass-text: rgba(30, 30, 30, 0.8);
            --border: rgba(255, 255, 255, 0.1);
            --text: #ffffff;
            --muted: #aaaaaa;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', monospace, sans-serif; }
        
        body {
            background-color: #050505;
            color: var(--text);
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            user-select: none;
            overscroll-behavior: none; /* Evita rebote en mÃ³viles */
        }

        #bg-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; }

        .container {
            position: relative;
            z-index: 10;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* --- CONTROLES --- */
        .controls {
            background: var(--glass);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin: 20px auto;
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .slider-row {
            display: flex;
            justify-content: space-between;
            width: 100%;
            gap: 20px;
            flex-wrap: wrap;
        }

        .slider-group {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            min-width: 150px;
        }

        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
            outline: none;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            box-shadow: 0 0 10px var(--primary);
            transition: 0.2s;
        }
        input[type=range]::-webkit-slider-thumb:hover { transform: scale(1.2); }

        .value-display { font-family: 'Courier New', monospace; color: var(--highlight); font-weight: bold; font-size: 0.9rem; }

        .buttons-row { display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; margin-top: 10px; }

        button.action-btn {
            background: var(--primary); color: #000; border: none; padding: 10px 20px; border-radius: 5px;
            cursor: pointer; font-weight: bold; transition: 0.3s; text-transform: uppercase; font-size: 0.9rem;
        }
        button.action-btn:hover { box-shadow: 0 0 15px var(--primary); transform: scale(1.05); }
        
        button.secondary-btn {
            background: transparent; border: 1px solid var(--secondary); color: var(--secondary);
            padding: 8px 15px; border-radius: 5px; cursor: pointer; transition: 0.3s; font-size: 0.9rem;
            display: flex; align-items: center; gap: 5px;
        }
        button.secondary-btn:hover { background: var(--secondary); color: #fff; box-shadow: 0 0 15px var(--secondary); }

        /* --- VISUALIZADOR --- */
        #canvas-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            margin-bottom: 20px;
            position: relative;
            z-index: 10;
        }

        #chaos-canvas {
            background: #000;
            border: 1px solid var(--border);
            border-radius: 4px;
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.1);
            cursor: move; 
            max-width: 100%;
            touch-action: none; /* Importante: deshabilita gestos del navegador sobre el canvas */
        }

        /* --- INFO --- */
        .info-section {
            background: var(--glass-text);
            padding: 40px;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin: 40px auto;
            max-width: 900px;
            text-align: left;
            line-height: 1.8;
            color: #ddd;
        }
        .info-section h2 { color: var(--primary); margin-bottom: 20px; font-size: 1.5rem; text-transform: uppercase; letter-spacing: 1px; border-bottom: 1px solid var(--border); padding-bottom: 10px; margin-top: 40px; }
        .info-section h2:first-child { margin-top: 0; }
        .info-section p { margin-bottom: 20px; font-size: 1rem; text-align: justify; }
        
        .info-section ul { list-style-type: none; margin-bottom: 20px; padding-left: 10px; }
        .info-section li { margin-bottom: 10px; border-left: 2px solid var(--primary-dim); padding-left: 15px; }
        .info-section strong { color: var(--text); }

        .math-box {
            background: rgba(0,0,0,0.5);
            border-left: 4px solid var(--primary);
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            color: var(--primary);
            font-size: 1.1rem;
            line-height: 1.6;
            text-align: center;
        }

        .dl-section { margin-top: 30px; border-top: 1px dashed var(--border); padding-top: 20px; text-align: center; }
        .btn-txt-dl {
            display: inline-block; background: rgba(255, 255, 255, 0.1); color: var(--muted); text-decoration: none;
            padding: 15px 25px; border: 1px solid var(--muted); border-radius: 4px; font-family: var(--font-mono);
            font-size: 0.9rem; transition: 0.3s; cursor: pointer;
        }
        .btn-txt-dl:hover { background: var(--primary); color: #000; border-color: var(--primary); box-shadow: 0 0 10px var(--primary); }

        .ad-container {
            width: 100%; max-width: 728px; margin: 30px auto; min-height: 90px;
            display: flex; justify-content: center; align-items: center;
            border: 1px dashed rgba(255,255,255,0.1); border-radius: 8px; background: rgba(0,0,0,0.2);
        }
        .ad-placeholder-text { color: var(--border); font-size: 0.8rem; text-transform: uppercase; letter-spacing: 2px; }

        /* Nav & Footer */
        nav { display: flex; flex-wrap: wrap; gap: 20px; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .nav-links { display: flex; gap: 15px; }
        .nav-btn { text-decoration: none; color: var(--muted); font-size: 0.9rem; border: 1px solid var(--border); padding: 5px 10px; border-radius: 4px; transition: 0.3s; background: rgba(0,0,0,0.5); }
        .nav-btn:hover { color: var(--primary); border-color: var(--primary); }
        .logo { font-size: 1.2rem; font-weight: bold; color: var(--primary); text-decoration: none; letter-spacing: 2px; }
        .lang-switch button { background: rgba(0,0,0,0.5); border: 1px solid var(--border); color: var(--muted); padding: 5px 10px; cursor: pointer; border-radius: 4px; margin-left: 2px;}
        .lang-switch button.active { background-color: var(--primary) !important; color: #000 !important; border-color: var(--primary) !important; font-weight: bold; }
        footer { margin-top: auto; background: rgba(0,0,0,0.9); backdrop-filter: blur(5px); border-top: 1px solid var(--border); padding: 30px 20px; text-align: center; font-size: 0.8rem; color: var(--muted); display: flex; flex-direction: column; gap: 15px; align-items: center; position: relative; z-index: 20; }
        .legal-links { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; margin-bottom: 10px; }
        .legal-links a { color: var(--muted); text-decoration: none; transition: 0.3s; border-bottom: 1px solid transparent; }
        .legal-links a:hover { color: var(--primary); border-bottom-color: var(--primary); }
        .coffee-btn { background: linear-gradient(45deg, #FFDD00, #FBB03B); color: #000; padding: 8px 15px; border-radius: 20px; text-decoration: none; font-weight: bold; font-size: 0.85rem; display: inline-flex; align-items: center; gap: 5px; transition: transform 0.2s; }
        .coffee-btn:hover { transform: scale(1.05); }

    </style>
</head>
<body oncontextmenu="return false;">

    <canvas id="bg-canvas"></canvas>

    <div class="container">
        <nav>
            <div class="nav-links">
                <a href="../../index.html" class="nav-btn" id="nav-main">â† HUB PRINCIPAL</a>
                <a href="../index.html" class="nav-btn" id="nav-math">â† HUB MATH</a>
            </div>
            <div class="logo">GRAPHICS LABS</div>
            <div class="lang-switch">
                <button onclick="setLang('es')" id="btn-es" class="active">ES</button>
                <button onclick="setLang('ca')" id="btn-ca">CA</button>
                <button onclick="setLang('en')" id="btn-en">EN</button>
                <button onclick="setLang('fr')" id="btn-fr">FR</button>
                <button onclick="setLang('de')" id="btn-de">DE</button>
                <button onclick="setLang('pt')" id="btn-pt">PT</button>
                <button onclick="setLang('it')" id="btn-it">IT</button>
                <button onclick="setLang('nl')" id="btn-nl">NL</button>
                <button onclick="setLang('ja')" id="btn-ja">JP</button>
            </div>
        </nav>

        <h1 id="txt-title">PROYECTO CAOS</h1>
        <p style="color:var(--muted); margin-bottom: 20px;" id="txt-desc">SimulaciÃ³n del Atractor de Lorenz y el Efecto Mariposa.</p>

        <div class="controls">
            
            <div class="slider-row">
                <div class="slider-group">
                    <label>Sigma (Ïƒ)</label>
                    <input type="range" id="sl-sigma" min="1" max="30" step="0.1" value="10">
                    <div class="value-display" id="val-sigma">10.0</div>
                </div>
                <div class="slider-group">
                    <label>Rho (Ï)</label>
                    <input type="range" id="sl-rho" min="1" max="50" step="0.1" value="28">
                    <div class="value-display" id="val-rho">28.0</div>
                </div>
                <div class="slider-group">
                    <label>Beta (Î²)</label>
                    <input type="range" id="sl-beta" min="0.1" max="5" step="0.1" value="2.6">
                    <div class="value-display" id="val-beta">2.6</div>
                </div>
            </div>

            <div class="slider-group" style="width:100%">
                <label id="lbl-speed">Velocidad de SimulaciÃ³n:</label>
                <input type="range" id="sl-speed" min="1" max="10" step="1" value="3">
            </div>

            <div class="buttons-row">
                <button class="action-btn" onclick="restartSim()" id="btn-restart">REINICIAR</button>
                <button class="secondary-btn" onclick="saveImage()" id="btn-save">ğŸ’¾ IMG</button>
            </div>
        </div>

        <div id="canvas-container">
            <canvas id="chaos-canvas" width="800" height="600"></canvas>
            <p style="color:var(--muted); font-size: 0.8rem; margin-top:5px;" id="txt-note">Arrastra el ratÃ³n sobre el canvas para rotar la vista 3D.</p>
        </div>

        <div class="info-section">
            <h2 id="info-h-history">La Historia: Un "Error" MeteorolÃ³gico</h2>
            <p id="info-p-history">
                En 1963, Edward Lorenz, un meteorÃ³logo del MIT, intentaba predecir el clima con una computadora primitiva. Un dÃ­a, repitiÃ³ una simulaciÃ³n introduciendo 0.506 en lugar de 0.506127. PensÃ³ que esa milÃ©sima no importarÃ­a, pero al volver del cafÃ©, la simulaciÃ³n era totalmente distinta. Acababa de descubrir el Caos Determinista: sistemas donde reglas exactas producen resultados impredecibles si cambias mÃ­nimamente el inicio.
            </p>

            <h2 id="info-h-eq">Las Ecuaciones Diferenciales (El Motor)</h2>
            <p id="info-p-eq">
                El sistema de Lorenz se define por tres ecuaciones diferenciales ordinarias que dictan la velocidad y direcciÃ³n del cambio en cada instante:
            </p>
            <div class="math-box">
                dx/dt = Ïƒ (y - x)<br>
                dy/dt = x (Ï - z) - y<br>
                dz/dt = x y - Î² z
            </div>
            
            <h2 id="info-h-vars">Variables del Mundo Real</h2>
            <ul id="info-list-vars">
                <li><strong>x:</strong> Velocidad de rotaciÃ³n del fluido (convecciÃ³n).</li>
                <li><strong>y:</strong> Diferencia de temperatura entre corrientes ascendentes y descendentes.</li>
                <li><strong>z:</strong> DesviaciÃ³n de la temperatura vertical respecto al equilibrio.</li>
            </ul>

            <h2 id="info-h-const">Las Constantes (Tus Sliders)</h2>
            <ul id="info-list-const">
                <li><strong>Sigma (Ïƒ):</strong> Viscosidad del fluido. En tu lab es 10. Si sube, es mÃ¡s espeso (miel vs agua).</li>
                <li><strong>Rho (Ï):</strong> Diferencia de temperatura base-tope. Si Ï > 24.74, nace el Caos.</li>
                <li><strong>Beta (Î²):</strong> ProporciÃ³n geomÃ©trica del espacio. Normalmente 8/3.</li>
            </ul>

            <h2 id="info-h-butterfly">Â¿Por quÃ© tiene forma de Mariposa?</h2>
            <p id="info-p-butterfly">
                Cuando el sistema es caÃ³tico (Rho=28), el punto nunca se queda quieto. Gira alrededor de un "ala", se vuelve inestable y salta a la otra. Lo increÃ­ble es que nunca se cruza consigo mismo y nunca repite la misma trayectoria exacta, dibujando una estructura fractal infinita en un espacio finito.
            </p>
            
            <div class="dl-section">
                <h3 style="color:var(--primary); margin-bottom:15px;" id="h-dl-data">Descarga de Datos (CÃ¡lculo)</h3>
                <p id="p-dl-data" style="font-size:0.9rem;">
                    Descarga las coordenadas (X, Y, Z) generadas por la simulaciÃ³n en formato CSV para utilizarlas en software matemÃ¡tico externo.
                </p>
                <button onclick="downloadData()" class="btn-txt-dl" id="btn-dl-data">
                    â¬‡ Descargar Coordenadas (.csv)
                </button>
            </div>
        </div>

        <div class="ad-container"><span class="ad-placeholder-text">Ad Space</span></div>
    </div>

    <footer>
        <div class="legal-links">
            <a href="../../legal.html" id="link-legal">Aviso Legal</a>
            <a href="../../privacy.html" id="link-privacy">PolÃ­tica de Privacidad</a>
            <a href="../../cookies.html" id="link-cookies">PolÃ­tica de Cookies</a>
            <a href="mailto:pbazan@gmail.com" id="link-contact">Contacto</a>
        </div>
        <span id="footer-rights">Â© 2025 Graphics Labs</span>
        <a href="https://paypal.me/pbazan" target="_blank" class="coffee-btn">
            â˜• <span id="btn-coffee">InvÃ­tame a un cafÃ©</span>
        </a>
    </footer>

    <script>
        /* --- 1. CONFIGURACIÃ“N --- */
        const canvas = document.getElementById('chaos-canvas');
        const ctx = canvas.getContext('2d');
        
        let x = 0.1, y = 0, z = 0;
        let sigma = 10;
        let rho = 28;
        let beta = 8/3;
        
        let points = [];
        let angleX = 0; // RotaciÃ³n vista
        let angleY = 0;
        
        // Elementos UI
        const slSigma = document.getElementById('sl-sigma');
        const slRho = document.getElementById('sl-rho');
        const slBeta = document.getElementById('sl-beta');
        const slSpeed = document.getElementById('sl-speed');
        
        // Event listeners para sliders
        slSigma.oninput = () => { sigma = parseFloat(slSigma.value); document.getElementById('val-sigma').innerText = sigma.toFixed(1); restartSim(false); };
        slRho.oninput = () => { rho = parseFloat(slRho.value); document.getElementById('val-rho').innerText = rho.toFixed(1); restartSim(false); };
        slBeta.oninput = () => { beta = parseFloat(slBeta.value); document.getElementById('val-beta').innerText = beta.toFixed(1); restartSim(false); };

        /* --- 2. LÃ“GICA DE SIMULACIÃ“N --- */
        function calculate() {
            // Euler integration
            let dt = 0.01;
            const steps = parseInt(slSpeed.value) * 2;
            
            for(let i=0; i<steps; i++) {
                let dx = (sigma * (y - x)) * dt;
                let dy = (x * (rho - z) - y) * dt;
                let dz = (x * y - beta * z) * dt;
                
                x = x + dx;
                y = y + dy;
                z = z + dz;
                
                points.push({x, y, z});
                if(points.length > 3000) {
                    points.shift();
                }
            }
        }

        /* --- 3. DIBUJADO (PROYECCIÃ“N 3D) --- */
        function draw() {
            ctx.fillStyle = "rgba(0, 0, 0, 1)"; 
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            calculate();

            ctx.lineWidth = 1.5;
            const cx = canvas.width / 2;
            const cy = canvas.height / 2 + 50;
            const scale = 12;

            if (points.length < 2) { requestAnimationFrame(draw); return; }

            ctx.beginPath();
            
            for (let i = 0; i < points.length - 1; i++) {
                let p = points[i];
                let nextP = points[i+1];

                // RotaciÃ³n 3D simple
                let rotX = p.x * Math.cos(angleY) - p.z * Math.sin(angleY);
                let rotZ = p.x * Math.sin(angleY) + p.z * Math.cos(angleY);
                let rotY = p.y * Math.cos(angleX) - rotZ * Math.sin(angleX);
                
                let nRotX = nextP.x * Math.cos(angleY) - nextP.z * Math.sin(angleY);
                let nRotZ = nextP.x * Math.sin(angleY) + nextP.z * Math.cos(angleY);
                let nRotY = nextP.y * Math.cos(angleX) - nRotZ * Math.sin(angleX);

                // ProyecciÃ³n 2D
                let px = cx + rotX * scale;
                let py = cy - rotY * scale; 
                let npx = cx + nRotX * scale;
                let npy = cy - nRotY * scale;

                let ratio = i / points.length;
                // Gradiente Verde a Morado
                let rVal = 0 + ratio * (189 - 0);
                let gVal = 255 + ratio * (0 - 255);
                let bVal = 65 + ratio * (255 - 65);
                
                ctx.strokeStyle = `rgb(${rVal},${gVal},${bVal})`;
                
                ctx.beginPath();
                ctx.moveTo(px, py);
                ctx.lineTo(npx, npy);
                ctx.stroke();
            }
            requestAnimationFrame(draw);
        }

        /* --- 4. INTERACTIVIDAD (CANVAS PRINCIPAL) --- */
        let isDragging = false;
        let lastMouseX = 0, lastMouseY = 0;

        // -- Eventos de RatÃ³n (Desktop) --
        canvas.addEventListener('mousedown', e => { isDragging = true; lastMouseX = e.offsetX; lastMouseY = e.offsetY; });
        window.addEventListener('mouseup', () => isDragging = false);
        canvas.addEventListener('mousemove', e => {
            if(isDragging) {
                const dx = e.offsetX - lastMouseX;
                const dy = e.offsetY - lastMouseY;
                angleY += dx * 0.01;
                angleX += dy * 0.01;
                lastMouseX = e.offsetX;
                lastMouseY = e.offsetY;
            }
        });

        // -- Eventos TÃ¡ctiles (MÃ³vil) --
        canvas.addEventListener('touchstart', e => {
            e.preventDefault(); // Evita el scroll
            isDragging = true;
            const rect = canvas.getBoundingClientRect();
            // Obtenemos la posiciÃ³n relativa al canvas del primer dedo
            lastMouseX = e.touches[0].clientX - rect.left;
            lastMouseY = e.touches[0].clientY - rect.top;
        }, { passive: false });

        window.addEventListener('touchend', () => isDragging = false);

        canvas.addEventListener('touchmove', e => {
            e.preventDefault(); // Evita el scroll
            if(isDragging) {
                const rect = canvas.getBoundingClientRect();
                const touchX = e.touches[0].clientX - rect.left;
                const touchY = e.touches[0].clientY - rect.top;

                const dx = touchX - lastMouseX;
                const dy = touchY - lastMouseY;
                
                angleY += dx * 0.01;
                angleX += dy * 0.01;
                
                lastMouseX = touchX;
                lastMouseY = touchY;
            }
        }, { passive: false });

        function restartSim(clear = true) {
            x = 0.1; y = 0; z = 0;
            if(clear) points = [];
        }

        function saveImage() {
            const link = document.createElement('a');
            link.download = 'chaos_lorenz_attractor.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        function downloadData() {
            let csvContent = "data:text/csv;charset=utf-8,";
            csvContent += "Step,X,Y,Z\n";
            const limit = Math.min(points.length, 5000);
            for(let i = 0; i < limit; i++){
                let row = `${i},${points[i].x.toFixed(4)},${points[i].y.toFixed(4)},${points[i].z.toFixed(4)}`;
                csvContent += row + "\r\n";
            }
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "lorenz_data.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        /* --- 5. MULTI-IDIOMA --- */
        const translations = {
            'es': {
                nav_main: "â† HUB PRINCIPAL", nav_math: "â† HUB MATH",
                title: "PROYECTO CAOS", desc: "SimulaciÃ³n del Atractor de Lorenz y el Efecto Mariposa.",
                lbl_speed: "Velocidad de SimulaciÃ³n:", btn_restart: "REINICIAR", btn_save: "ğŸ’¾ IMG",
                txt_note: "Arrastra el ratÃ³n sobre el canvas para rotar la vista 3D.",
                h_history: "La Historia: Un \"Error\" MeteorolÃ³gico",
                p_history: "En 1963, Edward Lorenz, un meteorÃ³logo del MIT, intentaba predecir el clima con una computadora primitiva. Un dÃ­a, repitiÃ³ una simulaciÃ³n introduciendo 0.506 en lugar de 0.506127. PensÃ³ que esa milÃ©sima no importarÃ­a, pero al volver del cafÃ©, la simulaciÃ³n era totalmente distinta. Acababa de descubrir el Caos Determinista: sistemas donde reglas exactas producen resultados impredecibles si cambias mÃ­nimamente el inicio.",
                h_eq: "Las Ecuaciones Diferenciales (El Motor)",
                p_eq: "El sistema de Lorenz se define por tres ecuaciones diferenciales ordinarias que dictan la velocidad y direcciÃ³n del cambio en cada instante:",
                h_vars: "Variables del Mundo Real",
                list_vars: "<li><strong>x:</strong> Velocidad de rotaciÃ³n del fluido (convecciÃ³n).</li><li><strong>y:</strong> Diferencia de temperatura entre corrientes ascendentes y descendentes.</li><li><strong>z:</strong> DesviaciÃ³n de la temperatura vertical respecto al equilibrio.</li>",
                h_const: "Las Constantes (Tus Sliders)",
                list_const: "<li><strong>Sigma (Ïƒ):</strong> Viscosidad del fluido. En tu lab es 10. Si sube, es mÃ¡s espeso (miel vs agua).</li><li><strong>Rho (Ï):</strong> Diferencia de temperatura base-tope. Si Ï > 24.74, nace el Caos.</li><li><strong>Beta (Î²):</strong> ProporciÃ³n geomÃ©trica del espacio. Normalmente 8/3.</li>",
                h_butterfly: "Â¿Por quÃ© tiene forma de Mariposa?",
                p_butterfly: "Cuando el sistema es caÃ³tico (Rho=28), el punto nunca se queda quieto. Gira alrededor de un \"ala\", se vuelve inestable y salta a la otra. Lo increÃ­ble es que nunca se cruza consigo mismo y nunca repite la misma trayectoria exacta, dibujando una estructura fractal infinita en un espacio finito.",
                h_dl_data: "Descarga de Datos (CÃ¡lculo)",
                p_dl_data: "Descarga las coordenadas (X, Y, Z) generadas por la simulaciÃ³n en formato CSV para utilizarlas en software matemÃ¡tico externo.",
                btn_dl_data: "â¬‡ Descargar Coordenadas (.csv)",
                legal: "Aviso Legal", privacy: "Privacidad", cookies: "Cookies", contact: "Contacto", coffee: "InvÃ­tame a un cafÃ©", rights: "Â© 2025 Graphics Labs"
            },
            'en': {
                nav_main: "â† MAIN HUB", nav_math: "â† MATH HUB",
                title: "PROJECT CHAOS", desc: "Lorenz Attractor Simulation and the Butterfly Effect.",
                lbl_speed: "Simulation Speed:", btn_restart: "RESTART", btn_save: "ğŸ’¾ IMG",
                txt_note: "Drag mouse over canvas to rotate the 3D view.",
                h_history: "The History: A Meteorological \"Error\"",
                p_history: "In 1963, Edward Lorenz, an MIT meteorologist, was trying to predict weather using a primitive computer. One day, he repeated a simulation entering 0.506 instead of 0.506127. He thought that thousandth wouldn't matter, but upon returning from coffee, the simulation was totally different. He had just discovered Deterministic Chaos: systems where exact rules produce unpredictable results if you slightly change the start.",
                h_eq: "The Differential Equations (The Engine)",
                p_eq: "The Lorenz system is defined by three ordinary differential equations that dictate the speed and direction of change at every instant:",
                h_vars: "Real World Variables",
                list_vars: "<li><strong>x:</strong> Rate of fluid rotation (convection).</li><li><strong>y:</strong> Temperature difference between ascending and descending currents.</li><li><strong>z:</strong> Vertical temperature deviation from equilibrium.</li>",
                h_const: "The Constants (Your Sliders)",
                list_const: "<li><strong>Sigma (Ïƒ):</strong> Fluid viscosity. In your lab it's 10. If raised, it's thicker (honey vs water).</li><li><strong>Rho (Ï):</strong> Temp difference base-top. If Ï > 24.74, Chaos is born.</li><li><strong>Beta (Î²):</strong> Geometric proportion of the space. Usually 8/3.</li>",
                h_butterfly: "Why the Butterfly Shape?",
                p_butterfly: "When the system is chaotic (Rho=28), the point never stays still. It orbits one \"wing\", becomes unstable, and jumps to the other. Amazingly, it never crosses itself and never repeats the exact same path, drawing an infinite fractal structure in finite space.",
                h_dl_data: "Data Download (Calculus)",
                p_dl_data: "Download the (X, Y, Z) coordinates generated by the simulation in CSV format for use in external mathematical software.",
                btn_dl_data: "â¬‡ Download Coordinates (.csv)",
                legal: "Legal Notice", privacy: "Privacy Policy", cookies: "Cookies", contact: "Contact", coffee: "Buy me a coffee", rights: "Â© 2025 Graphics Labs"
            },
            'ca': {
                nav_main: "â† HUB PRINCIPAL", nav_math: "â† HUB MATH",
                title: "PROJECTE CAOS", desc: "SimulaciÃ³ de l'Atractor de Lorenz i l'Efecte Papallona.",
                lbl_speed: "Velocitat de SimulaciÃ³:", btn_restart: "REINICIAR", btn_save: "ğŸ’¾ IMG",
                txt_note: "Arrossega el ratolÃ­ sobre el canvas per rotar la vista 3D.",
                h_history: "La HistÃ²ria: Un \"Error\" MeteorolÃ²gic",
                p_history: "El 1963, Edward Lorenz, un meteorÃ²leg del MIT, intentava predir el clima amb un ordinador primitiu. Un dia, va repetir una simulaciÃ³ introduint 0.506 en lloc de 0.506127. Va pensar que aquella milÂ·lÃ¨sima no importaria, perÃ² en tornar del cafÃ¨, la simulaciÃ³ era totalment diferent. Acabava de descobrir el Caos Determinista.",
                h_eq: "Les Equacions Diferencials (El Motor)",
                p_eq: "El sistema de Lorenz es defineix per tres equacions diferencials ordinÃ ries que dicten la velocitat i direcciÃ³ del canvi en cada instant:",
                h_vars: "Variables del MÃ³n Real",
                list_vars: "<li><strong>x:</strong> Velocitat de rotaciÃ³ del fluid (convecciÃ³).</li><li><strong>y:</strong> DiferÃ¨ncia de temperatura entre corrents ascendents i descendents.</li><li><strong>z:</strong> DesviaciÃ³ de la temperatura vertical respecte a l'equilibri.</li>",
                h_const: "Les Constants (Els teus Sliders)",
                list_const: "<li><strong>Sigma (Ïƒ):</strong> Viscositat del fluid. Al teu lab Ã©s 10. Si puja, Ã©s mÃ©s espÃ¨s (mel vs aigua).</li><li><strong>Rho (Ï):</strong> DiferÃ¨ncia de temperatura base-top. Si Ï > 24.74, neix el Caos.</li><li><strong>Beta (Î²):</strong> ProporciÃ³ geomÃ¨trica de l'espai. Normalment 8/3.</li>",
                h_butterfly: "Per quÃ¨ tÃ© forma de Papallona?",
                p_butterfly: "Quan el sistema Ã©s caÃ²tic (Rho=28), el punt mai es queda quiet. Gira al voltant d'una \"ala\", es torna inestable i salta a l'altra. L'increÃ¯ble Ã©s que mai es creua amb si mateix i mai repeteix la mateixa trajectÃ²ria exacta.",
                h_dl_data: "DescÃ rrega de Dades",
                p_dl_data: "Descarrega les coordenades (X, Y, Z) generades per la simulaciÃ³ en format CSV.",
                btn_dl_data: "â¬‡ Descarregar Coordenades (.csv)",
                legal: "AvÃ­s Legal", privacy: "Privacitat", cookies: "Cookies", contact: "Contacte", coffee: "Convida'm a un cafÃ¨", rights: "Â© 2025 Graphics Labs"
            },
            'fr': {
                nav_main: "â† HUB PRINCIPAL", nav_math: "â† HUB MATH",
                title: "PROJET CHAOS", desc: "Simulation de l'Attracteur de Lorenz et Effet Papillon.",
                lbl_speed: "Vitesse de Simulation:", btn_restart: "REDÃ‰MARRER", btn_save: "ğŸ’¾ IMG",
                txt_note: "Faites glisser la souris sur le canevas pour faire pivoter la vue 3D.",
                h_history: "L'Histoire : Une \"Erreur\" MÃ©tÃ©orologique",
                p_history: "En 1963, Edward Lorenz, mÃ©tÃ©orologue au MIT, tentait de prÃ©dire le climat. Un jour, il a rÃ©pÃ©tÃ© une simulation en entrant 0.506 au lieu de 0.506127. Il pensait que ce milliÃ¨me n'aurait pas d'importance, mais le rÃ©sultat fut totalement diffÃ©rent. Il venait de dÃ©couvrir le Chaos DÃ©terministe.",
                h_eq: "Les Ã‰quations DiffÃ©rentielles (Le Moteur)",
                p_eq: "Le systÃ¨me de Lorenz est dÃ©fini par trois Ã©quations diffÃ©rentielles ordinaires qui dictent la vitesse et la direction du changement Ã  chaque instant :",
                h_vars: "Variables du Monde RÃ©el",
                list_vars: "<li><strong>x:</strong> Vitesse de rotation du fluide (convection).</li><li><strong>y:</strong> DiffÃ©rence de tempÃ©rature entre courants ascendants et descendants.</li><li><strong>z:</strong> DÃ©viation de la tempÃ©rature verticale par rapport Ã  l'Ã©quilibre.</li>",
                h_const: "Les Constantes (Vos Sliders)",
                list_const: "<li><strong>Sigma (Ïƒ):</strong> ViscositÃ© du fluide. Ici 10. Si elle augmente, c'est plus Ã©pais (miel vs eau).</li><li><strong>Rho (Ï):</strong> DiffÃ©rence de temp. base-sommet. Si Ï > 24.74, le Chaos naÃ®t.</li><li><strong>Beta (Î²):</strong> Proportion gÃ©omÃ©trique de l'espace. Normalement 8/3.</li>",
                h_butterfly: "Pourquoi une forme de Papillon ?",
                p_butterfly: "Quand le systÃ¨me est chaotique (Rho=28), le point ne reste jamais immobile. Il tourne autour d'une \"aile\", devient instable et saute vers l'autre. Il ne se croise jamais lui-mÃªme et ne rÃ©pÃ¨te jamais la mÃªme trajectoire exacte.",
                h_dl_data: "TÃ©lÃ©chargement de DonnÃ©es",
                p_dl_data: "TÃ©lÃ©chargez les coordonnÃ©es (X, Y, Z) gÃ©nÃ©rÃ©es au format CSV.",
                btn_dl_data: "â¬‡ TÃ©lÃ©charger CoordonnÃ©es (.csv)",
                legal: "Mentions LÃ©gales", privacy: "ConfidentialitÃ©", cookies: "Cookies", contact: "Contact", coffee: "Offrez-moi un cafÃ©", rights: "Â© 2025 Graphics Labs"
            },
            'de': {
                nav_main: "â† HAUPT-HUB", nav_math: "â† MATH HUB",
                title: "PROJEKT CHAOS", desc: "Lorenz-Attraktor-Simulation und der Schmetterlingseffekt.",
                lbl_speed: "Simulationsgeschwindigkeit:", btn_restart: "NEUSTART", btn_save: "ğŸ’¾ IMG",
                txt_note: "Ziehen Sie die Maus Ã¼ber die Leinwand, um die 3D-Ansicht zu drehen.",
                h_history: "Die Geschichte: Ein meteorologischer \"Fehler\"",
                p_history: "1963 versuchte Edward Lorenz, das Wetter vorherzusagen. Er wiederholte eine Simulation mit 0,506 statt 0,506127. Er dachte, das Tausendstel sei egal, aber das Ergebnis war vÃ¶llig anders. Er hatte gerade das deterministische Chaos entdeckt.",
                h_eq: "Die Differentialgleichungen (Der Motor)",
                p_eq: "Das Lorenz-System wird durch drei gewÃ¶hnliche Differentialgleichungen definiert:",
                h_vars: "Variablen der realen Welt",
                list_vars: "<li><strong>x:</strong> Rotationsgeschwindigkeit der FlÃ¼ssigkeit.</li><li><strong>y:</strong> Temperaturunterschied zwischen auf- und absteigenden StrÃ¶men.</li><li><strong>z:</strong> Vertikale Temperaturabweichung vom Gleichgewicht.</li>",
                h_const: "Die Konstanten (Ihre Regler)",
                list_const: "<li><strong>Sigma (Ïƒ):</strong> ViskositÃ¤t. Hier 10. Wenn hÃ¶her, dicker (Honig vs Wasser).</li><li><strong>Rho (Ï):</strong> Temperaturdifferenz. Wenn Ï > 24.74, entsteht Chaos.</li><li><strong>Beta (Î²):</strong> Geometrische Proportion. Normalerweise 8/3.</li>",
                h_butterfly: "Warum die Schmetterlingsform?",
                p_butterfly: "Wenn das System chaotisch ist (Rho=28), bleibt der Punkt nie stehen. Er umkreist einen \"FlÃ¼gel\", wird instabil und springt zum anderen. Er kreuzt sich nie selbst und wiederholt nie genau denselben Pfad.",
                h_dl_data: "Daten-Download",
                p_dl_data: "Laden Sie die (X, Y, Z) Koordinaten im CSV-Format herunter.",
                btn_dl_data: "â¬‡ Koordinaten herunterladen (.csv)",
                legal: "Impressum", privacy: "Datenschutz", cookies: "Cookies", contact: "Kontakt", coffee: "Kauf mir einen Kaffee", rights: "Â© 2025 Graphics Labs"
            },
            'pt': {
                nav_main: "â† HUB PRINCIPAL", nav_math: "â† HUB MATH",
                title: "PROJETO CAOS", desc: "SimulaÃ§Ã£o do Atrator de Lorenz e o Efeito Borboleta.",
                lbl_speed: "Velocidade da SimulaÃ§Ã£o:", btn_restart: "REINICIAR", btn_save: "ğŸ’¾ IMG",
                txt_note: "Arraste o mouse sobre o canvas para girar a visualizaÃ§Ã£o 3D.",
                h_history: "A HistÃ³ria: Um \"Erro\" MeteorolÃ³gico",
                p_history: "Em 1963, Edward Lorenz tentava prever o clima. Repetiu uma simulaÃ§Ã£o inserindo 0.506 em vez de 0.506127. Pensou que nÃ£o importaria, mas o resultado foi totalmente diferente. Ele acabara de descobrir o Caos DeterminÃ­stico.",
                h_eq: "As EquaÃ§Ãµes Diferenciais (O Motor)",
                p_eq: "O sistema de Lorenz Ã© definido por trÃªs equaÃ§Ãµes diferenciais ordinÃ¡rias:",
                h_vars: "VariÃ¡veis do Mundo Real",
                list_vars: "<li><strong>x:</strong> Velocidade de rotaÃ§Ã£o do fluido.</li><li><strong>y:</strong> DiferenÃ§a de temperatura entre correntes ascendentes e descendentes.</li><li><strong>z:</strong> Desvio da temperatura vertical em relaÃ§Ã£o ao equilÃ­brio.</li>",
                h_const: "As Constantes (Seus Sliders)",
                list_const: "<li><strong>Sigma (Ïƒ):</strong> Viscosidade. Aqui Ã© 10. Se subir, Ã© mais espesso (mel vs Ã¡gua).</li><li><strong>Rho (Ï):</strong> DiferenÃ§a de temperatura. Se Ï > 24.74, nasce o Caos.</li><li><strong>Beta (Î²):</strong> ProporÃ§Ã£o geomÃ©trica. Normalmente 8/3.</li>",
                h_butterfly: "Por que a forma de Borboleta?",
                p_butterfly: "Quando o sistema Ã© caÃ³tico (Rho=28), o ponto nunca para. Gira em torno de uma \"asa\", torna-se instÃ¡vel e salta para a outra. Nunca se cruza consigo mesmo e nunca repete a mesma trajetÃ³ria exata.",
                h_dl_data: "Download de Dados",
                p_dl_data: "Baixe as coordenadas (X, Y, Z) em formato CSV.",
                btn_dl_data: "â¬‡ Baixar Coordenadas (.csv)",
                legal: "Aviso Legal", privacy: "Privacidade", cookies: "Cookies", contact: "Contato", coffee: "Pagar um cafÃ©", rights: "Â© 2025 Graphics Labs"
            },
            'it': {
                nav_main: "â† HUB PRINCIPALE", nav_math: "â† HUB MATH",
                title: "PROGETTO CAOS", desc: "Simulazione dell'Attrattore di Lorenz ed Effetto Farfalla.",
                lbl_speed: "VelocitÃ  di Simulazione:", btn_restart: "RIAVVIA", btn_save: "ğŸ’¾ IMG",
                txt_note: "Trascina il mouse sulla tela per ruotare la vista 3D.",
                h_history: "La Storia: Un \"Errore\" Meteorologico",
                p_history: "Nel 1963, Edward Lorenz tentava di prevedere il clima. RipetÃ© una simulazione inserendo 0.506 invece di 0.506127. Il risultato fu totalmente diverso. Aveva appena scoperto il Caos Deterministico.",
                h_eq: "Le Equazioni Differenziali (Il Motore)",
                p_eq: "Il sistema di Lorenz Ã¨ definito da tre equazioni differenziali ordinarie:",
                h_vars: "Variabili del Mondo Reale",
                list_vars: "<li><strong>x:</strong> VelocitÃ  di rotazione del fluido.</li><li><strong>y:</strong> Differenza di temperatura tra correnti ascendenti e discendenti.</li><li><strong>z:</strong> Deviazione della temperatura verticale dall'equilibrio.</li>",
                h_const: "Le Costanti (I tuoi Slider)",
                list_const: "<li><strong>Sigma (Ïƒ):</strong> ViscositÃ . Qui Ã¨ 10. Se sale, Ã¨ piÃ¹ denso (miele vs acqua).</li><li><strong>Rho (Ï):</strong> Differenza di temperatura. Se Ï > 24.74, nasce il Caos.</li><li><strong>Beta (Î²):</strong> Proporzione geometrica. Normalmente 8/3.</li>",
                h_butterfly: "PerchÃ© la forma a Farfalla?",
                p_butterfly: "Quando il sistema Ã¨ caotico (Rho=28), il punto non si ferma mai. Ruota attorno a un'\"ala\", diventa instabile e salta all'altra. Non si incrocia mai con se stesso e non ripete mai lo stesso percorso.",
                h_dl_data: "Download Dati",
                p_dl_data: "Scarica le coordinate (X, Y, Z) in formato CSV.",
                btn_dl_data: "â¬‡ Scarica Coordinate (.csv)",
                legal: "Note Legali", privacy: "Privacy", cookies: "Cookies", contact: "Contatto", coffee: "Offrimi un caffÃ¨", rights: "Â© 2025 Graphics Labs"
            },
            'nl': {
                nav_main: "â† HOOFDHUB", nav_math: "â† MATH HUB",
                title: "PROJECT CHAOS", desc: "Lorenz Attractor Simulatie en het Vlinder Effect.",
                lbl_speed: "Simulatiesnelheid:", btn_restart: "HERSTARTEN", btn_save: "ğŸ’¾ IMG",
                txt_note: "Sleep de muis over het canvas om de 3D-weergave te draaien.",
                h_history: "De Geschiedenis: Een Meteorologische \"Fout\"",
                p_history: "In 1963 probeerde Edward Lorenz het weer te voorspellen. Hij herhaalde een simulatie met 0.506 in plaats van 0.506127. Het resultaat was totaal anders. Hij had net Deterministische Chaos ontdekt.",
                h_eq: "De Differentiaalvergelijkingen (De Motor)",
                p_eq: "Het Lorenz-systeem wordt gedefinieerd door drie gewone differentiaalvergelijkingen:",
                h_vars: "Variabelen uit de echte wereld",
                list_vars: "<li><strong>x:</strong> Rotatiesnelheid van de vloeistof.</li><li><strong>y:</strong> Temperatuurverschil tussen stromen.</li><li><strong>z:</strong> Verticale temperatuurafwijking.</li>",
                h_const: "De Constanten (Je Sliders)",
                list_const: "<li><strong>Sigma (Ïƒ):</strong> Viscositeit. Hier 10. Hoger is dikker (honing vs water).</li><li><strong>Rho (Ï):</strong> Temperatuurverschil. Als Ï > 24.74, ontstaat Chaos.</li><li><strong>Beta (Î²):</strong> Geometrische verhouding. Meestal 8/3.</li>",
                h_butterfly: "Waarom de Vlindervorm?",
                p_butterfly: "Als het systeem chaotisch is (Rho=28), staat het punt nooit stil. Het draait om een \"vleugel\", wordt onstabiel en springt naar de andere. Het kruist zichzelf nooit en herhaalt nooit exact hetzelfde pad.",
                h_dl_data: "Gegevens Downloaden",
                p_dl_data: "Download de (X, Y, Z) coÃ¶rdinaten in CSV-formaat.",
                btn_dl_data: "â¬‡ Download CoÃ¶rdinaten (.csv)",
                legal: "Juridisch", privacy: "Privacy", cookies: "Cookies", contact: "Contact", coffee: "Koop koffie", rights: "Â© 2025 Graphics Labs"
            },
            'ja': {
                nav_main: "â† ãƒ¡ã‚¤ãƒ³ãƒãƒ–", nav_math: "â† æ•°å­¦ãƒãƒ–",
                title: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ»ã‚«ã‚ªã‚¹", desc: "ãƒ­ãƒ¼ãƒ¬ãƒ³ãƒ„ãƒ»ã‚¢ãƒˆãƒ©ã‚¯ã‚¿ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒã‚¿ãƒ•ãƒ©ã‚¤åŠ¹æœã€‚",
                lbl_speed: "ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é€Ÿåº¦:", btn_restart: "å†èµ·å‹•", btn_save: "ğŸ’¾ ç”»åƒä¿å­˜",
                txt_note: "ã‚­ãƒ£ãƒ³ãƒã‚¹ä¸Šã§ãƒã‚¦ã‚¹ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦3Dãƒ“ãƒ¥ãƒ¼ã‚’å›è»¢ã•ã›ã¾ã™ã€‚",
                h_history: "æ­´å²ï¼šæ°—è±¡å­¦çš„ã€Œã‚¨ãƒ©ãƒ¼ã€",
                p_history: "1963å¹´ã€ã‚¨ãƒ‰ãƒ¯ãƒ¼ãƒ‰ãƒ»ãƒ­ãƒ¼ãƒ¬ãƒ³ãƒ„ã¯å¤©æ°—ã‚’äºˆæ¸¬ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã—ãŸã€‚å½¼ã¯0.506127ã®ä»£ã‚ã‚Šã«0.506ã‚’å…¥åŠ›ã—ã¦ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç¹°ã‚Šè¿”ã—ã¾ã—ãŸã€‚çµæœã¯å…¨ãç•°ãªã‚Šã¾ã—ãŸã€‚å½¼ã¯æ±ºå®šè«–çš„ã‚«ã‚ªã‚¹ã‚’ç™ºè¦‹ã—ãŸã®ã§ã™ã€‚",
                h_eq: "å¾®åˆ†æ–¹ç¨‹å¼ï¼ˆã‚¨ãƒ³ã‚¸ãƒ³ï¼‰",
                p_eq: "ãƒ­ãƒ¼ãƒ¬ãƒ³ãƒ„ã‚·ã‚¹ãƒ†ãƒ ã¯ã€3ã¤ã®å¸¸å¾®åˆ†æ–¹ç¨‹å¼ã«ã‚ˆã£ã¦å®šç¾©ã•ã‚Œã¾ã™ï¼š",
                h_vars: "ç¾å®Ÿä¸–ç•Œã®å¤‰æ•°",
                list_vars: "<li><strong>x:</strong> æµä½“ã®å›è»¢é€Ÿåº¦ï¼ˆå¯¾æµï¼‰ã€‚</li><li><strong>y:</strong> ä¸Šæ˜‡æ°—æµã¨ä¸‹é™æ°—æµã®æ¸©åº¦å·®ã€‚</li><li><strong>z:</strong> å¹³è¡¡ã‹ã‚‰ã®å‚ç›´æ¸©åº¦åå·®ã€‚</li>",
                h_const: "å®šæ•°ï¼ˆã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ï¼‰",
                list_const: "<li><strong>Sigma (Ïƒ):</strong> æµä½“ã®ç²˜åº¦ã€‚ã“ã“ã§ã¯10ã€‚ä¸Šã’ã‚‹ã¨èœ‚èœœã®ã‚ˆã†ã«æ¿ƒããªã‚Šã¾ã™ã€‚</li><li><strong>Rho (Ï):</strong> æ¸©åº¦å·®ã€‚Ï > 24.74ã®å ´åˆã€ã‚«ã‚ªã‚¹ãŒç”Ÿã¾ã‚Œã¾ã™ã€‚</li><li><strong>Beta (Î²):</strong> ç©ºé–“ã®å¹¾ä½•å­¦çš„æ¯”ç‡ã€‚é€šå¸¸8/3ã€‚</li>",
                h_butterfly: "ãªãœè¶ã®å½¢ãªã®ã‹ï¼Ÿ",
                p_butterfly: "ã‚·ã‚¹ãƒ†ãƒ ãŒã‚«ã‚ªã‚¹ï¼ˆRho=28ï¼‰ã®å ´åˆã€ç‚¹ã¯æ±ºã—ã¦é™æ­¢ã—ã¾ã›ã‚“ã€‚ä¸€ã¤ã®ã€Œç¿¼ã€ã®å‘¨ã‚Šã‚’å›ã‚Šã€ä¸å®‰å®šã«ãªã‚Šã€ã‚‚ã†ä¸€æ–¹ã«é£›ã³ç§»ã‚Šã¾ã™ã€‚æ±ºã—ã¦è‡ªåˆ†è‡ªèº«ã¨äº¤å·®ã›ãšã€å…¨ãåŒã˜çµŒè·¯ã‚’ç¹°ã‚Šè¿”ã™ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚",
                h_dl_data: "ãƒ‡ãƒ¼ã‚¿ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
                p_dl_data: "ï¼ˆXã€Yã€Zï¼‰åº§æ¨™ã‚’CSVå½¢å¼ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚",
                btn_dl_data: "â¬‡ åº§æ¨™ã‚’DL (.csv)",
                legal: "æ³•çš„é€šçŸ¥", privacy: "ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼", cookies: "ã‚¯ãƒƒã‚­ãƒ¼", contact: "é€£çµ¡å…ˆ", coffee: "ã‚³ãƒ¼ãƒ’ãƒ¼ã‚’å¥¢ã‚‹", rights: "Â© 2025 Graphics Labs"
            }
        };

        let currentLang = 'es';
        function setLang(lang) {
            localStorage.setItem('gl_lang', lang);
            currentLang = lang;
            const t = translations[lang] || translations['es'];
            
            // Textos bÃ¡sicos
            document.getElementById('nav-main').innerText = t.nav_main;
            document.getElementById('nav-math').innerText = t.nav_math;
            document.getElementById('txt-title').innerText = t.title;
            document.getElementById('txt-desc').innerText = t.desc;
            document.getElementById('lbl-speed').innerText = t.lbl_speed;
            document.getElementById('btn-restart').innerText = t.btn_restart;
            document.getElementById('btn-save').innerText = t.btn_save;
            document.getElementById('txt-note').innerText = t.txt_note;

            // Textos nuevos de informaciÃ³n
            document.getElementById('info-h-history').innerText = t.h_history;
            document.getElementById('info-p-history').innerText = t.p_history;
            
            document.getElementById('info-h-eq').innerText = t.h_eq;
            document.getElementById('info-p-eq').innerText = t.p_eq;
            
            document.getElementById('info-h-vars').innerText = t.h_vars;
            document.getElementById('info-list-vars').innerHTML = t.list_vars; // innerHTML porque tiene <li>
            
            document.getElementById('info-h-const').innerText = t.h_const;
            document.getElementById('info-list-const').innerHTML = t.list_const; // innerHTML porque tiene <li>
            
            document.getElementById('info-h-butterfly').innerText = t.h_butterfly;
            document.getElementById('info-p-butterfly').innerText = t.p_butterfly;
            
            document.getElementById('h-dl-data').innerText = t.h_dl_data;
            document.getElementById('p-dl-data').innerText = t.p_dl_data;
            document.getElementById('btn-dl-data').innerText = t.btn_dl_data;

            // Footer
            document.getElementById('link-legal').innerText = t.legal;
            document.getElementById('link-privacy').innerText = t.privacy;
            document.getElementById('link-cookies').innerText = t.cookies;
            document.getElementById('link-contact').innerText = t.contact;
            document.getElementById('btn-coffee').innerText = t.coffee;
            document.getElementById('footer-rights').innerText = t.rights;

            // Botones idioma
            document.querySelectorAll('.lang-switch button').forEach(b => {
                b.classList.remove('active');
                if(b.id === 'btn-' + lang) b.classList.add('active');
            });
        }

        /* --- FONDO ANIMADO --- */
        const bgCanvas = document.getElementById('bg-canvas');
        const bgCtx = bgCanvas.getContext('2d');
        let particlesArray = [];
        const mouse = { x: null, y: null, radius: 150 }; // <--- AÃ‘ADIDO: Objeto Mouse

        function resizeBg() { bgCanvas.width = window.innerWidth; bgCanvas.height = window.innerHeight; }
        window.addEventListener('resize', () => { resizeBg(); initParticles(); });
        window.addEventListener('mousemove', (e) => { mouse.x = e.x; mouse.y = e.y; }); // <--- AÃ‘ADIDO: Listener del Mouse
        resizeBg();

        class Particle {
            constructor() {
                this.x = Math.random() * bgCanvas.width;
                this.y = Math.random() * bgCanvas.height;
                this.size = Math.random() * 12 + 8;
                this.speedX = (Math.random() * 1) - 0.5;
                this.speedY = (Math.random() * 1) - 0.5;
                const symbols = ['âˆ«', 'dx', 'dy', 'dt', 'Ïƒ', 'Ï', 'Î²', 'âˆ†', 'âˆ'];
                this.text = symbols[Math.floor(Math.random() * symbols.length)];
            }
            draw() {
                bgCtx.font = this.size + 'px monospace';
                bgCtx.fillStyle = 'rgba(0, 255, 65, 0.1)'; 
                bgCtx.fillText(this.text, this.x, this.y);
            }
            update() {
                this.x += this.speedX; this.y += this.speedY;

                // --- AÃ‘ADIDO: LÃ“GICA DE INTERACCIÃ“N CON EL RATÃ“N ---
                if (mouse.x != null) {
                    let dx = mouse.x - this.x;
                    let dy = mouse.y - this.y;
                    let distance = Math.sqrt(dx*dx + dy*dy);
                    if (distance < mouse.radius) {
                        const forceDirectionX = dx / distance;
                        const forceDirectionY = dy / distance;
                        const force = (mouse.radius - distance) / mouse.radius;
                        const directionX = forceDirectionX * force * 5;
                        const directionY = forceDirectionY * force * 5;
                        this.x -= directionX;
                        this.y -= directionY;
                    }
                }
                // ----------------------------------------------------

                if (this.x > bgCanvas.width) this.x = 0; if (this.x < 0) this.x = bgCanvas.width;
                if (this.y > bgCanvas.height) this.y = 0; if (this.y < 0) this.y = bgCanvas.height;
                this.draw();
            }
        }

        function initParticles() {
            particlesArray = [];
            let n = (bgCanvas.height * bgCanvas.width) / 9000;
            for (let i = 0; i < n; i++) particlesArray.push(new Particle());
        }
        function animateParticles() {
            bgCtx.clearRect(0, 0, bgCanvas.width, bgCanvas.height);
            for (let i = 0; i < particlesArray.length; i++) particlesArray[i].update();
            requestAnimationFrame(animateParticles);
        }
        initParticles(); animateParticles();

        // INIT
        const savedLang = localStorage.getItem('gl_lang') || 'es';
        setLang(savedLang);
        requestAnimationFrame(draw);

    </script>
</body>
</html>
